{"version":3,"sources":["api/api.js","hooks/use-deep-effect.js","hooks/use-request.js","components/directory-table.jsx","components/directory-tree.jsx","components/directory-breadcrumb.jsx","components/upload-modal.jsx","components/new-folder-modal.jsx","app.js","hooks/use-lang.js","index.js"],"names":["http","axios","create","baseURL","params","data","res","URLSearchParams","Object","keys","forEach","key","append","api","tree","get","dir","post","upload","path","args","FormData","file","formParams","newfolder","useDeepEffect","callback","deps","useEffect","value","ref","useRef","isEqual","current","useDeepCompareMemoize","reducer","oldState","newState","useRequest","request","payload","useReducer","loading","error","total","state","setState","then","response","responseData","status","length","msg","catch","message","DirectoryTable","refresh","filterNameInput","createRef","filterSizeInput","filterPermissionsInput","filterOwnerInput","filterGroupInput","useState","filterSizeOperation","setFilterSizeOperation","filterModifiedOperation","setFilterModifiedOperation","selectedRowKeys","setSelectedRowKeys","dataSource","size","style","position","top","left","console","log","type","fontSize","color","rowSelection","onChange","hideDefaultSelections","selections","text","i18next","t","onSelect","filter","el","includes","columnWidth","columns","title","dataIndex","sorter","a","b","types","indexOf","filters","onFilter","filterMultiple","render","width","name","localeCompare","filterDropdown","setSelectedKeys","selectedKeys","confirm","clearFilters","padding","node","placeholder","e","target","onPressEnter","marginBottom","display","onClick","icon","marginRight","record","toString","toLowerCase","onFilterDropdownVisibleChange","visible","setTimeout","select","Group","min","focus","modified","showTime","unix","moment","format","permissions","owner","group","rowKey","scroll","y","x","DirectoryTree","treeData","defaultExpandAll","DirectoryBreadcrumb","items","split","unshift","className","currentKey","map","item","idx","arg","Item","renderBreadcrumbItems","UploadModal","onUploadFinished","modalVisible","setModalVisible","fileList","setFileList","uploading","setUploading","hideModal","onOk","uploadedFileList","uploaded","notification","success","description","failedFileList","failed","errors","onCancel","okText","cancelText","beforeUpload","onRemove","index","newFileList","slice","splice","NewFolderModal","onFolderCreated","folderName","setFolderName","creating","setCreating","Header","Layout","Footer","Sider","Content","App","locale","currentPath","setCurrentPath","selectedKey","setSelectedKey","setRefresh","lang","locales","defaultLang","window","location","pathname","undefined","init","lng","resources","useLang","en","uk","ukUA","enUS","span","replace","shift","ReactDOM","document","getElementById"],"mappings":"qsHAEMA,E,OAAOC,EAAMC,OAAO,CACzBC,QAAS,sBAIV,SAASC,EAAOC,GACf,IAAMC,EAAM,IAAIC,gBAKhB,OAJAC,OAAOC,KAAKJ,GAAMK,QAAQ,SAAAC,GACzBL,EAAIM,OAAOD,EAAKN,EAAKM,MAGfL,EAaR,IAAMO,EAAM,CAEXC,KAFW,WAGV,OAAOd,EAAKe,IAAI,cAEjBC,IALW,SAKPX,GACH,OAAOL,EAAKiB,KAAK,WAAYb,EAAOC,KAErCa,OARW,SAQJb,EAAMc,GACZ,IAAMC,EAlBR,SAAoBf,GACnB,IAAMC,EAAM,IAAIe,SAKhB,OAJAhB,EAAKK,QAAQ,SAAAY,GACZhB,EAAIM,OAAO,UAAWU,KAGhBhB,EAYOiB,CAAWlB,GAExB,OADAe,EAAKR,OAAO,OAAQO,GACbnB,EAAKiB,KAAK,cAAeG,IAEjCI,UAbW,SAaDnB,GACT,OAAOL,EAAKiB,KAAK,iBAAkBb,EAAOC,M,iBC1B7B,SAASoB,EAAcC,EAAUC,GAC/CC,oBAAUF,EAXX,SAA+BG,GAC9B,IAAMC,EAAMC,mBAMZ,OAJKC,kBAAQH,EAAOC,EAAIG,WACvBH,EAAIG,QAAUJ,GAGRC,EAAIG,QAISC,CAAsBP,I,4NCX3C,IAAMQ,EAAU,SAACC,EAAUC,GAAX,O,qVAAA,IAA8BD,EAA9B,GAA2CC,IAE5C,SAASC,EAAT,GAA2C,IAArBC,EAAoB,EAApBA,QAASC,EAAW,EAAXA,QAAW,EAS5BC,qBAAWN,EAPlB,CACpBO,SAAS,EACTC,MAAO,KACPtC,KAAM,KACNuC,MAAO,IANgD,mBAShDC,EATgD,KASzCC,EATyC,KAsCxD,OA3BArB,EAAc,WAEbqB,EAAS,CAAEJ,SAAS,EAAMC,MAAO,OACjCJ,EAAQC,GACNO,KAAK,SAAAC,GAEL,IAAMC,EAAeD,EAAS3C,KAE9B,GAA4B,OAAxB4C,EAAaC,OAAiB,CAAC,IAC1B7C,EAAS4C,EAAT5C,KACFuC,EAAQK,EAAaL,MAAQK,EAAaL,MAAQvC,EAAK8C,OAI7DL,EAAS,CAAEJ,SAAS,EAAOrC,OAAMuC,eAEjCE,EAAS,CAAEJ,SAAS,EAAOC,MAAOM,EAAaG,IAAMH,EAAaG,IAAM,gBAAiB/C,KAAM,KAAMuC,MAAO,MAG7GS,MAAM,SAAAV,GACNG,EAAS,CAAEJ,SAAS,EAAOC,MAAOA,EAAMW,QAASjD,KAAM,KAAMuC,MAAO,OAEpE,CACFL,EACAC,IAGMK,ECnCO,SAASU,EAAT,GAA4C,IAAlBpC,EAAiB,EAAjBA,KAAMqC,EAAW,EAAXA,QAC1CC,EAAkBC,sBAClBC,EAAkBD,sBAClBE,EAAyBF,sBACzBG,EAAmBH,sBACnBI,EAAmBJ,sBALkC,EAMDK,mBAAS,MANR,mBAMjDC,EANiD,KAM5BC,EAN4B,OAOOF,mBAAS,MAPhB,mBAOjDG,EAPiD,KAOxBC,EAPwB,OAQTJ,mBAAS,IARA,mBAQjDK,EARiD,KAQhCC,EARgC,KAUnDC,EAAahC,EAAW,CAC7BC,QAAS1B,EAAIG,IACbwB,QAAS,CAAErB,OAAMqC,aAGlB,GAAIc,EAAW5B,QACd,OACC,kBAAC,IAAD,CAAM6B,KAAK,QAAQC,MAAO,CAAEC,SAAU,WAAYC,IAAK,MAAOC,KAAM,SAItE,GAAIL,EAAW3B,MAEd,OADAiC,QAAQC,IAAR,iBAAuBP,EAAW3B,QAEjC,kBAAC,IAAD,CAAMmC,KAAK,UAAUN,MAAO,CAAEO,SAAU,QAASC,MAAO,MAAOP,SAAU,WAAYC,IAAK,GAAIC,KAAM,MAItG,IAAMM,EAAe,CACpBb,kBACAc,SAAU,SAAAzE,GACT4D,EAAmB5D,IAEpB0E,uBAAuB,EACvBC,WAAY,CACX,CACCzE,IAAK,WACL0E,KAAMC,IAAQC,EAAE,YAChBC,SAAU,SAAAnF,GACTgE,EAAmBhE,KAGrB,CACCM,IAAK,UACL0E,KAAMC,IAAQC,EAAE,WAChBC,SAAU,WACTnB,EAAmB,MAGrB,CACC1D,IAAK,cACL0E,KAAMC,IAAQC,EAAE,eAChBC,SAAU,SAAAnF,GACTgE,EAAmBhE,EAAKoF,OAAO,SAAAC,GAAE,OAAKtB,EAAgBuB,SAASD,SAIlEE,YAAa,IAGRC,EAAU,CACf,CACCC,MAAOR,IAAQC,EAAE,QACjBQ,UAAW,OACXpF,IAAK,OACLqF,OAAQ,SAACC,EAAGC,GACX,IAAMC,EAAQ,CAAC,IAAK,KACpB,OAAOA,EAAMC,QAAQH,EAAEnB,MAAQqB,EAAMC,QAAQF,EAAEpB,OAEhDuB,QAAS,CACR,CAAEhB,KAAMC,IAAQC,EAAE,OAAQ1D,MAAO,KACjC,CAAEwD,KAAMC,IAAQC,EAAE,QAAS1D,MAAO,MAEnCyE,SAAU,SAACzE,EAAOxB,GAAR,OAA8C,IAA7BA,EAAKyE,KAAKsB,QAAQvE,IAC7C0E,gBAAgB,EAChBC,OAAQ,SAAA3E,GACP,IAAIvB,EAAM,GACV,OAAQuB,GACP,IAAK,IACJvB,EAAM,kBAAC,IAAD,CAAMwE,KAAK,WACjB,MACD,IAAK,IACJxE,EAAM,kBAAC,IAAD,CAAMwE,KAAK,SACjB,MACD,QACCxE,EAAM,uCAER,OAAOA,GAERmG,MAAO,IAER,CACCX,MAAOR,IAAQC,EAAE,QACjBQ,UAAW,OACXpF,IAAK,OACLqF,OAAQ,SAACC,EAAGC,GAAJ,OAAUD,EAAES,KAAKC,cAAcT,EAAEQ,OACzCE,eAAgB,gBAAGC,EAAH,EAAGA,gBAAiBC,EAApB,EAAoBA,aAAcC,EAAlC,EAAkCA,QAASC,EAA3C,EAA2CA,aAA3C,OACf,yBAAKxC,MAAO,CAAEyC,QAAS,IACtB,kBAAC,IAAD,CAAOnF,IAAM,SAAAoF,GAAUzD,EAAkByD,GAAUC,YAAc7B,IAAQC,EAAE,eAC1E1D,MAAQiF,EAAa,GACrB5B,SAAW,SAAAkC,GAAC,OAAIP,EAAgBO,EAAEC,OAAOxF,MAAQ,CAACuF,EAAEC,OAAOxF,OAAS,KACpEyF,aAAeP,EACfvC,MAAO,CAAEiC,MAAO,IAAKc,aAAc,EAAGC,QAAS,WAEhD,kBAAC,IAAD,CAAQ1C,KAAK,UAAU2C,QAAUV,EAChCW,KAAK,SAASnD,KAAK,QAAQC,MAAO,CAAEiC,MAAO,GAAIkB,YAAa,IAE1DrC,IAAQC,EAAE,UAEb,kBAAC,IAAD,CAAQkC,QAAUT,EAAezC,KAAK,QAAQC,MAAO,CAAEiC,MAAO,KAC3DnB,IAAQC,EAAE,YAIfe,SAAU,SAACzE,EAAO+F,GAAR,OAAmBA,EAAOlB,KAAKmB,WAAWC,cAAcnC,SAAS9D,EAAMiG,gBACjFC,8BAA+B,SAAAC,GAC1BA,GACHC,WAAW,kBAAMxE,EAAgByE,YAGnCzB,MAAO,KAER,CACCX,MAAOR,IAAQC,EAAE,QACjBQ,UAAW,OACXpF,IAAK,OACLqF,OAAQ,SAACC,EAAGC,GAAJ,OAAUD,EAAE1B,KAAO2B,EAAE3B,MAC7BqC,eAAgB,gBAAGC,EAAH,EAAGA,gBAAiBC,EAApB,EAAoBA,aAAcC,EAAlC,EAAkCA,QAASC,EAA3C,EAA2CA,aAA3C,OACf,yBAAKxC,MAAO,CAAEyC,QAAS,IACtB,kBAAC,IAAMkB,MAAP,CAAatG,MAAQmC,EACpBkB,SAAW,SAAAkC,GAAC,OAAInD,EAAuBmD,EAAEC,OAAOxF,QAChD2C,MAAO,CAAE+C,aAAc,IAEvB,kBAAC,IAAD,CAAO1F,MAAM,MAAb,KACA,kBAAC,IAAD,CAAOA,MAAM,MAAb,MAED,kBAAC,IAAD,CAAaC,IAAM,SAAAoF,GAAUvD,EAAkBuD,GAAUC,YAAc7B,IAAQC,EAAE,eAChF1D,MAAQiF,EAAa,GAAKsB,IAAM,EAAId,aAAeP,EACnD7B,SAAW,SAAArD,GAAK,OAAIgF,EAAgBhF,EAAQ,CAAEA,GAAU,KACxD2C,MAAO,CAAEiC,MAAO,IAAKc,aAAc,EAAGC,QAAS,WAEhD,kBAAC,IAAD,CAAQ1C,KAAK,UAAU2C,QAAUV,EAChCW,KAAK,SAASnD,KAAK,QAAQC,MAAO,CAAEiC,MAAO,GAAIkB,YAAa,IAE1DrC,IAAQC,EAAE,UAEb,kBAAC,IAAD,CAAQkC,QAAUT,EAAezC,KAAK,QAAQC,MAAO,CAAEiC,MAAO,KAC3DnB,IAAQC,EAAE,YAIfe,SAAU,SAACzE,EAAO+F,GAAR,MAA2C,OAAxB5D,EAA+B4D,EAAOrD,KAAO1C,EAAQ+F,EAAOrD,KAAO1C,GAChGkG,8BAA+B,SAAAC,GAC1BA,GACHC,WAAW,kBAAMtE,EAAgB0E,WAGnC5B,MAAO,KAER,CACCX,MAAOR,IAAQC,EAAE,YACjBQ,UAAW,WACXpF,IAAK,WACLqF,OAAQ,SAACC,EAAGC,GAAJ,OAAUD,EAAEqC,SAAWpC,EAAEoC,UACjC1B,eAAgB,gBAAGC,EAAH,EAAGA,gBAAiBC,EAApB,EAAoBA,aAAcC,EAAlC,EAAkCA,QAASC,EAA3C,EAA2CA,aAA3C,OACf,yBAAKxC,MAAO,CAAEyC,QAAS,IACtB,kBAAC,IAAMkB,MAAP,CAAatG,MAAQqC,EACpBgB,SAAW,SAAAkC,GAAC,OAAIjD,EAA2BiD,EAAEC,OAAOxF,QACpD2C,MAAO,CAAE+C,aAAc,IAEvB,kBAAC,IAAD,CAAO1F,MAAM,MAAb,KACA,kBAAC,IAAD,CAAOA,MAAM,MAAb,MAED,kBAAC,IAAD,CAAY0G,UAAQ,EAACpB,YAAc7B,IAAQC,EAAE,mBAAqB1D,MAAQiF,EAAa,GACtFQ,aAAeP,EAAU7B,SAAW,SAAArD,GAAK,OAAIgF,EAAgBhF,EAAQ,CAAEA,GAAU,KACjF2C,MAAO,CAAEiC,MAAO,IAAKc,aAAc,EAAGC,QAAS,WAEhD,kBAAC,IAAD,CAAQ1C,KAAK,UAAU2C,QAAUV,EAChCW,KAAK,SAASnD,KAAK,QAAQC,MAAO,CAAEiC,MAAO,GAAIkB,YAAa,IAE1DrC,IAAQC,EAAE,UAEb,kBAAC,IAAD,CAAQkC,QAAUT,EAAezC,KAAK,QAAQC,MAAO,CAAEiC,MAAO,KAC3DnB,IAAQC,EAAE,YAIfe,SAAU,SAACzE,EAAO+F,GAAR,MAA+C,OAA5B1D,EAAmC0D,EAAOU,SAAWzG,EAAM2G,OAASZ,EAAOU,SAAWzG,EAAM2G,QACzHhC,OAAQ,SAAA3E,GAAK,OAAI4G,IAAOD,KAAK3G,GAAO6G,OAAO,QAC3CjC,MAAO,KAER,CACCX,MAAOR,IAAQC,EAAE,eACjBQ,UAAW,cACXpF,IAAK,cACLqF,OAAQ,SAACC,EAAGC,GAAJ,OAAUD,EAAE0C,YAAYhC,cAAcT,EAAEyC,cAChD/B,eAAgB,gBAAGC,EAAH,EAAGA,gBAAiBC,EAApB,EAAoBA,aAAcC,EAAlC,EAAkCA,QAASC,EAA3C,EAA2CA,aAA3C,OACf,yBAAKxC,MAAO,CAAEyC,QAAS,IACtB,kBAAC,IAAD,CAAOnF,IAAM,SAAAoF,GAAUtD,EAAyBsD,GAAUC,YAAc7B,IAAQC,EAAE,sBACjF1D,MAAQiF,EAAa,GACrB5B,SAAW,SAAAkC,GAAC,OAAIP,EAAgBO,EAAEC,OAAOxF,MAAQ,CAACuF,EAAEC,OAAOxF,OAAS,KACpEyF,aAAeP,EACfvC,MAAO,CAAEiC,MAAO,IAAKc,aAAc,EAAGC,QAAS,WAEhD,kBAAC,IAAD,CAAQ1C,KAAK,UAAU2C,QAAUV,EAChCW,KAAK,SAASnD,KAAK,QAAQC,MAAO,CAAEiC,MAAO,GAAIkB,YAAa,IAE1DrC,IAAQC,EAAE,UAEb,kBAAC,IAAD,CAAQkC,QAAUT,EAAezC,KAAK,QAAQC,MAAO,CAAEiC,MAAO,KAC3DnB,IAAQC,EAAE,YAIfe,SAAU,SAACzE,EAAO+F,GAAR,OAAmBA,EAAOe,YAAYd,WAAWC,cAAcnC,SAAS9D,EAAMiG,gBACxFC,8BAA+B,SAAAC,GAC1BA,GACHC,WAAW,kBAAMrE,EAAuBsE,YAG1CzB,MAAO,KAER,CACCX,MAAOR,IAAQC,EAAE,SACjBQ,UAAW,QACXpF,IAAK,QACLqF,OAAQ,SAACC,EAAGC,GAAJ,OAAUD,EAAE2C,MAAMjC,cAAcT,EAAE0C,QAC1ChC,eAAgB,gBAAGC,EAAH,EAAGA,gBAAiBC,EAApB,EAAoBA,aAAcC,EAAlC,EAAkCA,QAASC,EAA3C,EAA2CA,aAA3C,OACf,yBAAKxC,MAAO,CAAEyC,QAAS,IACtB,kBAAC,IAAD,CAAOnF,IAAM,SAAAoF,GAAUrD,EAAmBqD,GAAUC,YAAc7B,IAAQC,EAAE,gBAC3E1D,MAAQiF,EAAa,GACrB5B,SAAW,SAAAkC,GAAC,OAAIP,EAAgBO,EAAEC,OAAOxF,MAAQ,CAACuF,EAAEC,OAAOxF,OAAS,KACpEyF,aAAeP,EACfvC,MAAO,CAAEiC,MAAO,IAAKc,aAAc,EAAGC,QAAS,WAEhD,kBAAC,IAAD,CAAQ1C,KAAK,UAAU2C,QAAUV,EAChCW,KAAK,SAASnD,KAAK,QAAQC,MAAO,CAAEiC,MAAO,GAAIkB,YAAa,IAE1DrC,IAAQC,EAAE,UAEb,kBAAC,IAAD,CAAQkC,QAAUT,EAAezC,KAAK,QAAQC,MAAO,CAAEiC,MAAO,KAC3DnB,IAAQC,EAAE,YAIfe,SAAU,SAACzE,EAAO+F,GAAR,OAAmBA,EAAOgB,MAAMf,WAAWC,cAAcnC,SAAS9D,EAAMiG,gBAClFC,8BAA+B,SAAAC,GAC1BA,GACHC,WAAW,kBAAMpE,EAAiBqE,YAGpCzB,MAAO,KAER,CACCX,MAAOR,IAAQC,EAAE,SACjBQ,UAAW,QACXpF,IAAK,QACLqF,OAAQ,SAACC,EAAGC,GAAJ,OAAUD,EAAE4C,MAAMlC,cAAcT,EAAE2C,QAC1CjC,eAAgB,gBAAGC,EAAH,EAAGA,gBAAiBC,EAApB,EAAoBA,aAAcC,EAAlC,EAAkCA,QAASC,EAA3C,EAA2CA,aAA3C,OACf,yBAAKxC,MAAO,CAAEyC,QAAS,IACtB,kBAAC,IAAD,CAAOnF,IAAM,SAAAoF,GAAUpD,EAAmBoD,GAAUC,YAAc7B,IAAQC,EAAE,gBAC3E1D,MAAQiF,EAAa,GACrB5B,SAAW,SAAAkC,GAAC,OAAIP,EAAgBO,EAAEC,OAAOxF,MAAQ,CAACuF,EAAEC,OAAOxF,OAAS,KACpEyF,aAAeP,EACfvC,MAAO,CAAEiC,MAAO,IAAKc,aAAc,EAAGC,QAAS,WAEhD,kBAAC,IAAD,CAAQ1C,KAAK,UAAU2C,QAAUV,EAChCW,KAAK,SAASnD,KAAK,QAAQC,MAAO,CAAEiC,MAAO,GAAIkB,YAAa,IAE1DrC,IAAQC,EAAE,UAEb,kBAAC,IAAD,CAAQkC,QAAUT,EAAezC,KAAK,QAAQC,MAAO,CAAEiC,MAAO,KAC3DnB,IAAQC,EAAE,YAIfe,SAAU,SAACzE,EAAO+F,GAAR,OAAmBA,EAAOiB,MAAMhB,WAAWC,cAAcnC,SAAS9D,EAAMiG,gBAClFC,8BAA+B,SAAAC,GAC1BA,GACHC,WAAW,kBAAMnE,EAAiBoE,YAGpCzB,MAAO,MAIT,OACC,kBAAC,IAAD,CAAOnC,WAAaA,EAAWjE,KAAOwF,QAAUA,EAAUiD,OAAO,OAChEC,OAAQ,CAAEC,EAAG,sBAAuBC,GAAG,GAAQ1E,KAAK,SACpDU,aAAeA,I,aCpSH,SAASiE,EAAT,GAA6D,IAApC1D,EAAmC,EAAnCA,SAAUsB,EAAyB,EAAzBA,aAActD,EAAW,EAAXA,QAEzDc,EAAahC,EAAW,CAC7BC,QAAS1B,EAAIC,KACb0B,QAAS,CAAEgB,aAGZ,OAAIc,EAAW5B,QAEb,kBAAC,IAAD,CAAM8B,MAAO,CAAEC,SAAU,WAAYC,IAAK,MAAOC,KAAM,SAIrDL,EAAW3B,OACdiC,QAAQC,IAAR,iBAAuBP,EAAW3B,QAEjC,kBAAC,IAAD,CAAMmC,KAAK,UAAUN,MAAO,CAAEO,SAAU,QAASC,MAAO,MAAOP,SAAU,WAAYC,IAAK,GAAIC,KAAM,OAI/F,kBAAC,IAAD,CAAMwE,SAAW,CAAE7E,EAAWjE,MAASmF,SAAWA,EAAWsB,aAAeA,EAAesC,kBAAgB,I,aCvBpG,SAASC,EAAT,GAAiD,IAAlBlI,EAAiB,EAAjBA,KAAMsG,EAAW,EAAXA,QAC7C6B,EAAQnI,EAAKoI,MAAM,KACzBD,EAAME,QAAQ,IAmBd,OACC,kBAAC,IAAD,CAAYC,UAAU,cAlBO,SAAApJ,GAC7B,IAAIqJ,EAAa,GACjB,OAAOrJ,EAAKsJ,IAAI,SAACC,EAAMC,GAEtB,IAAMC,EADNJ,GAAU,UAAQE,EAAR,KAEV,OAAY,IAARC,EAEF,kBAAC,IAAWE,KAAZ,CAAiBpJ,IAAM+I,EAAajC,QAAU,kBAAMA,EAAQqC,KAAO,kBAAC,IAAD,CAAMhF,KAAK,UAK/E,kBAAC,IAAWiF,KAAZ,CAAiBpJ,IAAM+I,EAAajC,QAAU,kBAAMA,EAAQqC,KAASF,KAMlCI,CAAsBV,I,wCClB9C,SAASW,EAAT,GAAkD,IAA3B9I,EAA0B,EAA1BA,KAAM+I,EAAoB,EAApBA,iBAAoB,EACvBnG,oBAAS,GADc,mBACxDoG,EADwD,KAC1CC,EAD0C,OAE/BrG,mBAAS,IAFsB,mBAExDsG,EAFwD,KAE9CC,EAF8C,OAG7BvG,oBAAS,GAHoB,mBAGxDwG,EAHwD,KAG7CC,EAH6C,KASzDC,EAAY,WACjBL,GAAgB,IAyEjB,OACC,oCACC,kBAAC,IAAD,CAAQtF,KAAK,UAAU4C,KAAK,SAASD,QAhFrB,WACjB2C,GAAgB,KAgFZ9E,IAAQC,EAAE,WAEb,kBAAC,IAAD,CAAOO,MAAQR,IAAQC,EAAE,gBAAkByC,QAAUmC,EAAeO,KA3EtD,WACf,OAAwB,IAApBL,EAASlH,SAGbqH,GAAa,GAEb3J,EAAIK,OAAOmJ,EAAUlJ,GACnB4B,KAAK,SAAAC,GACL,IAAMC,EAAeD,EAAS3C,KAE9B,GAA4B,OAAxB4C,EAAaC,OAAiB,CAAC,IAC1B7C,EAAS4C,EAAT5C,KACFsK,EAAmBtK,EAAKuK,SAASjB,IAAI,SAAAjE,GAAE,OAC5C,wBAAI/E,IAAM+E,EAAGgB,MAAShB,EAAGgB,QAEM,IAA5BiE,EAAiBxH,QACpB0H,IAAaC,QAAQ,CACpBxH,QAASgC,IAAQC,EAAE,wBACnBwF,YAAa,4BAAMJ,KAGrB,IAAMK,EAAiB3K,EAAK4K,OAAOtB,IAAI,SAAAjE,GAAE,OACxC,wBAAI/E,IAAM+E,EAAGgB,MAAb,UAA0BhB,EAAGgB,KAA7B,aAAwChB,EAAGwF,OAAO,GAAG5H,YAExB,IAA1B0H,EAAe7H,QAClB0H,IAAalI,MAAM,CAClBW,QAASgC,IAAQC,EAAE,qBACnBwF,YAAa,4BAAMC,KAIrBd,IACAI,EAAY,IACZG,QACM,CACN,IAAMrH,EAAMH,EAAaG,KAAO,gBAChCyH,IAAalI,MAAM,CAClBW,QAASgC,IAAQC,EAAE,qBACnBwF,YAAa3H,IAGfoH,GAAa,KACXnH,MAAM,SAAAV,GACRkI,IAAalI,MAAM,CAClBW,QAASgC,IAAQC,EAAE,qBACnBwF,YAAapI,EAAMW,UAEpBkH,GAAa,MAGR,IA0BLW,SAvBiB,WACnBb,EAAY,IACZG,KAqB2BW,OAASb,EAAa,kBAAC,IAAD,CAAMzF,KAAK,YAAgBQ,IAAQC,EAAE,MAAQ8F,WAAa/F,IAAQC,EAAE,WACnH,kBAAC,IAAD,CAAQ8E,SAAWA,EAAWiB,aAnBZ,SAAAhK,GAEpB,OADAgJ,EAAY,GAAD,mBAAMD,GAAN,CAAgB/I,MACpB,GAiBuDiK,SAd5C,SAAAjK,GAClB,IAAMkK,EAAQnB,EAASjE,QAAQ9E,GACzBmK,EAAcpB,EAASqB,QAC7BD,EAAYE,OAAOH,EAAO,GAC1BlB,EAAYmB,KAWT,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAM3G,KAAK,WADZ,aC3FU,SAAS8G,EAAT,GAAoD,IAA1BzK,EAAyB,EAAzBA,KAAM0K,EAAmB,EAAnBA,gBAAmB,EACzB9H,oBAAS,GADgB,mBAC1DoG,EAD0D,KAC5CC,EAD4C,OAE7BrG,mBAAS,IAFoB,mBAE1D+H,EAF0D,KAE9CC,EAF8C,OAGjChI,oBAAS,GAHwB,mBAG1DiI,EAH0D,KAGhDC,EAHgD,KAS3DxB,EAAY,WACjBL,GAAgB,IAmDjB,OACC,oCACC,kBAAC,IAAD,CAAQtF,KAAK,UAAU4C,KAAK,aAAaD,QA1DzB,WACjB2C,GAAgB,KA0DZ9E,IAAQC,EAAE,eAEb,kBAAC,IAAD,CAAOO,MAAQR,IAAQC,EAAE,cAAgByC,QAAUmC,EAAeO,KArDpD,WACf,MAAmB,KAAfoB,IAGJG,GAAY,GAEZpL,EAAIW,UAAU,CAAEL,OAAM2K,eACpB/I,KAAK,SAAAC,GACL,IAAMC,EAAeD,EAAS3C,KAE9B,GAA4B,OAAxB4C,EAAaC,OAAiB,CAAC,IAC1B7C,EAAS4C,EAAT5C,KACRwK,IAAaC,QAAQ,CACpBxH,QAASgC,IAAQC,EAAE,sBACnBwF,YAAa,2BAAK1K,EAAKyL,cAGxBD,IACAE,EAAc,IACdtB,QACM,CACN,IAAMrH,EAAMH,EAAaG,KAAO,gBAChCyH,IAAalI,MAAM,CAClBW,QAASgC,IAAQC,EAAE,mBACnBwF,YAAa3H,IAGf6I,GAAY,KACV5I,MAAM,SAAAV,GACRkI,IAAalI,MAAM,CAClBW,QAASgC,IAAQC,EAAE,mBACnBwF,YAAapI,EAAMW,UAEpB2I,GAAY,MAGP,IAkBLd,SAfiB,WACnBY,EAAc,IACdtB,KAa2BW,OAASY,EAAY,kBAAC,IAAD,CAAMlH,KAAK,YAAgBQ,IAAQC,EAAE,MAAQ8F,WAAa/F,IAAQC,EAAE,WAClH,kBAAC,IAAD,CAAO4B,YAAY,cAActF,MAAQiK,EAAa5G,SAXpC,SAAAkC,GACpB2E,EAAc3E,EAAEC,OAAOxF,Y,WC1CjBqK,EAAmCC,IAAnCD,OAAQE,EAA2BD,IAA3BC,OAAQC,EAAmBF,IAAnBE,MAAOC,EAAYH,IAAZG,QA+EhBC,MA7Ef,WAAgB,IAMXC,EANU,EACwBzI,mBAAS,IADjC,mBACP0I,EADO,KACMC,EADN,OAEwB3I,mBAAS,KAFjC,mBAEP4I,EAFO,KAEMC,EAFN,OAGgB7I,mBAAS0E,MAASD,QAHlC,mBAGPhF,EAHO,KAGEqJ,EAHF,KAKRC,EC3BQ,SAAiBC,EAASC,GAExC,IAAIF,EAAOG,OAAOC,SAASC,SAASzB,MAAM,EAAG,GAU7C,YATsB0B,IAAlBL,EAAQD,KACXA,EAAOE,GAGR1H,IAAQ+H,KAAK,CACZC,IAAKR,EACLS,UAAWR,EAAQD,KAGbA,EDeMU,CAAQ,CAAEC,KAAIC,MAAM,MAKjC,OAFAjF,IAAO+D,OAAOM,GAENA,GACP,IAAK,KACJN,EAASmB,IACT,MACD,IAAK,KACL,QACCnB,EAASoB,IAwBX,OACC,kBAAC,IAAD,CAAgBpB,OAASA,GACxB,yBAAK/C,UAAU,OACd,kBAAC,IAAD,CAAQA,UAAU,UACjB,kBAACyC,EAAD,CAAQzC,UAAU,UACjB,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAKoE,KAAO,GACTvI,IAAQC,EAAE,iBAEb,kBAAC,IAAD,CAAKsI,KAAO,IACX,kBAACxE,EAAD,CAAqBlI,KAAOsL,EAAchF,QA/BvB,SAAA9G,GACzBiM,EAAejM,GACf,IAAMQ,EAAOR,EAAImN,QAAQ,aAAc,IACvCpB,EAAevL,OA8BV,kBAAC,IAAD,CAAKsI,UAAU,aAAaoE,KAAO,GAClC,kBAAC5D,EAAD,CAAa9I,KAAOsL,EAAcvC,iBA5BhB,WACxB2C,EAAWpE,MAASD,YA6Bf,kBAAC,IAAD,CAAKiB,UAAU,aAAaoE,KAAO,GAClC,kBAACjC,EAAD,CAAgBzK,KAAOsL,EAAcZ,gBA3BpB,WACvBgB,EAAWpE,MAASD,cA8BjB,kBAAC,IAAD,KACC,kBAAC6D,EAAD,CAAO5C,UAAU,SAChB,kBAACP,EAAD,CAAe1D,SA7BA,SAAA/E,GACpB,IAAIE,EAAMF,EAAKsN,QACfnB,EAAejM,GACfA,EAAMA,EAAImN,QAAQ,aAAc,IAChCpB,EAAe/L,IAyB+BmG,aAAe,CAAE6F,GAAgBnJ,QAAUA,KAErF,kBAAC,IAAD,KACC,kBAAC8I,EAAD,CAAS7C,UAAU,WAClB,kBAAClG,EAAD,CAAgBpC,KAAOsL,EAAcjJ,QAAUA,KAEhD,kBAAC4I,EAAD,CAAQ3C,UAAU,UAAlB,gBExFPuE,IAASxH,OAAO,kBAAC,EAAD,MAASyH,SAASC,eAAe,W","file":"static/js/main.6f1197b0.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst http = axios.create({\n\tbaseURL: '//filemanager.com'\n});\n\n// helper to prepare params for post request\nfunction params(data) {\n\tconst res = new URLSearchParams();\n\tObject.keys(data).forEach(key => {\n\t\tres.append(key, data[key]);\n\t});\n\n\treturn res;\n}\n\n// special helper to prepare files as FormData for post request\nfunction formParams(data) {\n\tconst res = new FormData();\n\tdata.forEach(file => {\n\t\tres.append('files[]', file);\n\t});\n\n\treturn res;\n}\n\nconst api = {\n\n\ttree() {\n\t\treturn http.get('/api/tree');\n\t},\n\tdir(data) {\n\t\treturn http.post('/api/dir', params(data));\n\t},\n\tupload(data, path) {\n\t\tconst args = formParams(data);\n\t\targs.append('path', path);\n\t\treturn http.post('/api/upload', args);\n\t},\n\tnewfolder(data) {\n\t\treturn http.post('/api/newfolder', params(data));\n\t}\n\n};\n\nexport { api as default };\n","import { useEffect, useRef } from 'react';\n\nimport { isEqual } from 'lodash';\n\nfunction useDeepCompareMemoize(value) {\n\tconst ref = useRef();\n\n\tif (!isEqual(value, ref.current)) {\n\t\tref.current = value;\n\t}\n\n\treturn ref.current;\n}\n\nexport default function useDeepEffect(callback, deps) {\n\tuseEffect(callback, useDeepCompareMemoize(deps));\n}\n","import { useReducer } from 'react';\n\nimport useDeepEffect from './use-deep-effect';\n\nconst reducer = (oldState, newState) => ({ ...oldState, ...newState });\n\nexport default function useRequest({ request, payload }) {\n\n\tconst initialState = {\n\t\tloading: true,\n\t\terror: null,\n\t\tdata: null,\n\t\ttotal: 0\n\t};\n\n\tconst [ state, setState ] = useReducer(reducer, initialState);\n\n\tuseDeepEffect(() => {\n\n\t\tsetState({ loading: true, error: null });\n\t\trequest(payload)\n\t\t\t.then(response => {\n\n\t\t\t\tconst responseData = response.data;\n\n\t\t\t\tif (responseData.status === 'ok') {\n\t\t\t\t\tconst { data } = responseData;\n\t\t\t\t\tconst total = responseData.total ? responseData.total : data.length;\n\n\t\t\t\t\t// @todo: if we add schema, parse data here\n\n\t\t\t\t\tsetState({ loading: false, data, total });\n\t\t\t\t} else {\n\t\t\t\t\tsetState({ loading: false, error: responseData.msg ? responseData.msg : 'Unknown error', data: null, total: 0 });\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tsetState({ loading: false, error: error.message, data: null, total: 0 });\n\t\t\t});\n\t}, [\n\t\trequest,\n\t\tpayload\n\t]);\n\n\treturn state;\n}\n","import React, { createRef, useState } from 'react';\nimport { Table, Input, Button, Radio, InputNumber, DatePicker, Spin, Icon } from 'antd';\n\nimport i18next from 'i18next';\nimport moment from 'moment';\n\nimport api from '../api/api';\nimport useRequest from '../hooks/use-request';\n\nexport default function DirectoryTable({ path, refresh }) {\n\tlet filterNameInput = createRef();\n\tlet filterSizeInput = createRef();\n\tlet filterPermissionsInput = createRef();\n\tlet filterOwnerInput = createRef();\n\tlet filterGroupInput = createRef();\n\tconst [ filterSizeOperation, setFilterSizeOperation ] = useState('gt');\n\tconst [ filterModifiedOperation, setFilterModifiedOperation ] = useState('gt');\n\tconst [ selectedRowKeys, setSelectedRowKeys ] = useState([]);\n\n\tconst dataSource = useRequest({\n\t\trequest: api.dir,\n\t\tpayload: { path, refresh }\n\t});\n\n\tif (dataSource.loading) {\n\t\treturn (\n\t\t\t<Spin size='large' style={{ position: 'relative', top: '45%', left: '50%' }} />\n\t\t);\n\t}\n\n\tif (dataSource.error) {\n\t\tconsole.log(`Error: ${ dataSource.error }`);\n\t\treturn (\n\t\t\t<Icon type='warning' style={{ fontSize: '1.6em', color: 'red', position: 'relative', top: 25, left: 25 }} />\n\t\t);\n\t}\n\n\tconst rowSelection = {\n\t\tselectedRowKeys,\n\t\tonChange: keys => {\n\t\t\tsetSelectedRowKeys(keys);\n\t\t},\n\t\thideDefaultSelections: true,\n\t\tselections: [\n\t\t\t{\n\t\t\t\tkey: 'all-data',\n\t\t\t\ttext: i18next.t('all_data'),\n\t\t\t\tonSelect: data => {\n\t\t\t\t\tsetSelectedRowKeys(data);\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'no-data',\n\t\t\t\ttext: i18next.t('no_data'),\n\t\t\t\tonSelect: () => {\n\t\t\t\t\tsetSelectedRowKeys([]);\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'invert-data',\n\t\t\t\ttext: i18next.t('invert_data'),\n\t\t\t\tonSelect: data => {\n\t\t\t\t\tsetSelectedRowKeys(data.filter(el => !selectedRowKeys.includes(el)));\n\t\t\t\t}\n\t\t\t}\n\t\t],\n\t\tcolumnWidth: 50\n\t};\n\n\tconst columns = [\n\t\t{\n\t\t\ttitle: i18next.t('type'),\n\t\t\tdataIndex: 'type',\n\t\t\tkey: 'type',\n\t\t\tsorter: (a, b) => {\n\t\t\t\tconst types = ['d', 'f'];\n\t\t\t\treturn types.indexOf(a.type) - types.indexOf(b.type);\n\t\t\t},\n\t\t\tfilters: [\n\t\t\t\t{ text: i18next.t('dir'), value: 'd' },\n\t\t\t\t{ text: i18next.t('file'), value: 'f' }\n\t\t\t],\n\t\t\tonFilter: (value, data) => data.type.indexOf(value) === 0,\n\t\t\tfilterMultiple: false,\n\t\t\trender: value => {\n\t\t\t\tlet res = '';\n\t\t\t\tswitch (value) {\n\t\t\t\t\tcase 'd':\n\t\t\t\t\t\tres = <Icon type='folder' />;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'f':\n\t\t\t\t\t\tres = <Icon type='file' />;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tres = <span>value</span>;\n\t\t\t\t}\n\t\t\t\treturn res;\n\t\t\t},\n\t\t\twidth: 90\n\t\t},\n\t\t{\n\t\t\ttitle: i18next.t('name'),\n\t\t\tdataIndex: 'name',\n\t\t\tkey: 'name',\n\t\t\tsorter: (a, b) => a.name.localeCompare(b.name),\n\t\t\tfilterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n\t\t\t\t<div style={{ padding: 8 }}>\n\t\t\t\t\t<Input ref={ node => { filterNameInput = node; } } placeholder={ i18next.t('filter_name') }\n\t\t\t\t\t\tvalue={ selectedKeys[0] }\n\t\t\t\t\t\tonChange={ e => setSelectedKeys(e.target.value ? [e.target.value] : []) }\n\t\t\t\t\t\tonPressEnter={ confirm }\n\t\t\t\t\t\tstyle={{ width: 188, marginBottom: 8, display: 'block' }}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='primary' onClick={ confirm }\n\t\t\t\t\t\ticon='filter' size='small' style={{ width: 90, marginRight: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ i18next.t('apply') }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ clearFilters } size='small' style={{ width: 90 }}>\n\t\t\t\t\t\t{ i18next.t('reset') }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tonFilter: (value, record) => record.name.toString().toLowerCase().includes(value.toLowerCase()),\n\t\t\tonFilterDropdownVisibleChange: visible => {\n\t\t\t\tif (visible) {\n\t\t\t\t\tsetTimeout(() => filterNameInput.select());\n\t\t\t\t}\n\t\t\t},\n\t\t\twidth: 230\n\t\t},\n\t\t{\n\t\t\ttitle: i18next.t('size'),\n\t\t\tdataIndex: 'size',\n\t\t\tkey: 'size',\n\t\t\tsorter: (a, b) => a.size - b.size,\n\t\t\tfilterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n\t\t\t\t<div style={{ padding: 8 }}>\n\t\t\t\t\t<Radio.Group value={ filterSizeOperation }\n\t\t\t\t\t\tonChange={ e => setFilterSizeOperation(e.target.value) }\n\t\t\t\t\t\tstyle={{ marginBottom: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Radio value='gt'>&gt;</Radio>\n\t\t\t\t\t\t<Radio value='lt'>&lt;</Radio>\n\t\t\t\t\t</Radio.Group>\n\t\t\t\t\t<InputNumber ref={ node => { filterSizeInput = node; } } placeholder={ i18next.t('filter_size') }\n\t\t\t\t\t\tvalue={ selectedKeys[0] } min={ 0 } onPressEnter={ confirm }\n\t\t\t\t\t\tonChange={ value => setSelectedKeys(value ? [ value ] : []) }\n\t\t\t\t\t\tstyle={{ width: 188, marginBottom: 8, display: 'block' }}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='primary' onClick={ confirm }\n\t\t\t\t\t\ticon='filter' size='small' style={{ width: 90, marginRight: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ i18next.t('apply') }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ clearFilters } size='small' style={{ width: 90 }}>\n\t\t\t\t\t\t{ i18next.t('reset') }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tonFilter: (value, record) => filterSizeOperation === 'lt' ? record.size < value : record.size > value,\n\t\t\tonFilterDropdownVisibleChange: visible => {\n\t\t\t\tif (visible) {\n\t\t\t\t\tsetTimeout(() => filterSizeInput.focus());\n\t\t\t\t}\n\t\t\t},\n\t\t\twidth: 120\n\t\t},\n\t\t{\n\t\t\ttitle: i18next.t('modified'),\n\t\t\tdataIndex: 'modified',\n\t\t\tkey: 'modified',\n\t\t\tsorter: (a, b) => a.modified - b.modified,\n\t\t\tfilterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n\t\t\t\t<div style={{ padding: 8 }}>\n\t\t\t\t\t<Radio.Group value={ filterModifiedOperation }\n\t\t\t\t\t\tonChange={ e => setFilterModifiedOperation(e.target.value) }\n\t\t\t\t\t\tstyle={{ marginBottom: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Radio value='gt'>&gt;</Radio>\n\t\t\t\t\t\t<Radio value='lt'>&lt;</Radio>\n\t\t\t\t\t</Radio.Group>\n\t\t\t\t\t<DatePicker showTime placeholder={ i18next.t('filter_modified') } value={ selectedKeys[0] }\n\t\t\t\t\t\tonPressEnter={ confirm } onChange={ value => setSelectedKeys(value ? [ value ] : []) }\n\t\t\t\t\t\tstyle={{ width: 188, marginBottom: 8, display: 'block' }}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='primary' onClick={ confirm }\n\t\t\t\t\t\ticon='filter' size='small' style={{ width: 90, marginRight: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ i18next.t('apply') }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ clearFilters } size='small' style={{ width: 90 }}>\n\t\t\t\t\t\t{ i18next.t('reset') }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tonFilter: (value, record) => filterModifiedOperation === 'lt' ? record.modified < value.unix() : record.modified > value.unix(),\n\t\t\trender: value => moment.unix(value).format('LLL'),\n\t\t\twidth: 240\n\t\t},\n\t\t{\n\t\t\ttitle: i18next.t('permissions'),\n\t\t\tdataIndex: 'permissions',\n\t\t\tkey: 'permissions',\n\t\t\tsorter: (a, b) => a.permissions.localeCompare(b.permissions),\n\t\t\tfilterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n\t\t\t\t<div style={{ padding: 8 }}>\n\t\t\t\t\t<Input ref={ node => { filterPermissionsInput = node; } } placeholder={ i18next.t('filter_permissions') }\n\t\t\t\t\t\tvalue={ selectedKeys[0] }\n\t\t\t\t\t\tonChange={ e => setSelectedKeys(e.target.value ? [e.target.value] : []) }\n\t\t\t\t\t\tonPressEnter={ confirm }\n\t\t\t\t\t\tstyle={{ width: 188, marginBottom: 8, display: 'block' }}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='primary' onClick={ confirm }\n\t\t\t\t\t\ticon='filter' size='small' style={{ width: 90, marginRight: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ i18next.t('apply') }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ clearFilters } size='small' style={{ width: 90 }}>\n\t\t\t\t\t\t{ i18next.t('reset') }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tonFilter: (value, record) => record.permissions.toString().toLowerCase().includes(value.toLowerCase()),\n\t\t\tonFilterDropdownVisibleChange: visible => {\n\t\t\t\tif (visible) {\n\t\t\t\t\tsetTimeout(() => filterPermissionsInput.select());\n\t\t\t\t}\n\t\t\t},\n\t\t\twidth: 140\n\t\t},\n\t\t{\n\t\t\ttitle: i18next.t('owner'),\n\t\t\tdataIndex: 'owner',\n\t\t\tkey: 'owner',\n\t\t\tsorter: (a, b) => a.owner.localeCompare(b.owner),\n\t\t\tfilterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n\t\t\t\t<div style={{ padding: 8 }}>\n\t\t\t\t\t<Input ref={ node => { filterOwnerInput = node; } } placeholder={ i18next.t('filter_owner') }\n\t\t\t\t\t\tvalue={ selectedKeys[0] }\n\t\t\t\t\t\tonChange={ e => setSelectedKeys(e.target.value ? [e.target.value] : []) }\n\t\t\t\t\t\tonPressEnter={ confirm }\n\t\t\t\t\t\tstyle={{ width: 188, marginBottom: 8, display: 'block' }}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='primary' onClick={ confirm }\n\t\t\t\t\t\ticon='filter' size='small' style={{ width: 90, marginRight: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ i18next.t('apply') }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ clearFilters } size='small' style={{ width: 90 }}>\n\t\t\t\t\t\t{ i18next.t('reset') }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tonFilter: (value, record) => record.owner.toString().toLowerCase().includes(value.toLowerCase()),\n\t\t\tonFilterDropdownVisibleChange: visible => {\n\t\t\t\tif (visible) {\n\t\t\t\t\tsetTimeout(() => filterOwnerInput.select());\n\t\t\t\t}\n\t\t\t},\n\t\t\twidth: 140\n\t\t},\n\t\t{\n\t\t\ttitle: i18next.t('group'),\n\t\t\tdataIndex: 'group',\n\t\t\tkey: 'group',\n\t\t\tsorter: (a, b) => a.group.localeCompare(b.group),\n\t\t\tfilterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n\t\t\t\t<div style={{ padding: 8 }}>\n\t\t\t\t\t<Input ref={ node => { filterGroupInput = node; } } placeholder={ i18next.t('filter_group') }\n\t\t\t\t\t\tvalue={ selectedKeys[0] }\n\t\t\t\t\t\tonChange={ e => setSelectedKeys(e.target.value ? [e.target.value] : []) }\n\t\t\t\t\t\tonPressEnter={ confirm }\n\t\t\t\t\t\tstyle={{ width: 188, marginBottom: 8, display: 'block' }}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='primary' onClick={ confirm }\n\t\t\t\t\t\ticon='filter' size='small' style={{ width: 90, marginRight: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ i18next.t('apply') }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ clearFilters } size='small' style={{ width: 90 }}>\n\t\t\t\t\t\t{ i18next.t('reset') }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tonFilter: (value, record) => record.group.toString().toLowerCase().includes(value.toLowerCase()),\n\t\t\tonFilterDropdownVisibleChange: visible => {\n\t\t\t\tif (visible) {\n\t\t\t\t\tsetTimeout(() => filterGroupInput.select());\n\t\t\t\t}\n\t\t\t},\n\t\t\twidth: 140\n\t\t}\n\t];\n\n\treturn (\n\t\t<Table dataSource={ dataSource.data } columns={ columns } rowKey='name'\n\t\t\tscroll={{ y: 'calc(100vh - 240px)', x: true }} size='middle'\n\t\t\trowSelection={ rowSelection }\n\t\t/>\n\t);\n}\n","import React from 'react';\nimport { Tree, Spin, Icon } from 'antd';\n\nimport api from '../api/api';\nimport useRequest from '../hooks/use-request';\n\nexport default function DirectoryTree({ onSelect, selectedKeys, refresh }) {\n\n\tconst dataSource = useRequest({\n\t\trequest: api.tree,\n\t\tpayload: { refresh }\n\t});\n\n\tif (dataSource.loading) {\n\t\treturn (\n\t\t\t<Spin style={{ position: 'relative', top: '40%', left: '45%' }} />\n\t\t);\n\t}\n\n\tif (dataSource.error) {\n\t\tconsole.log(`Error: ${ dataSource.error }`);\n\t\treturn (\n\t\t\t<Icon type='warning' style={{ fontSize: '1.4em', color: 'red', position: 'relative', top: 15, left: 15 }} />\n\t\t);\n\t}\n\n\treturn <Tree treeData={ [ dataSource.data ] } onSelect={ onSelect } selectedKeys={ selectedKeys } defaultExpandAll />;\n}\n","import React from 'react';\nimport { Breadcrumb, Icon } from 'antd';\n\nexport default function DirectoryBreadcrumb({ path, onClick }) {\n\tconst items = path.split('/');\n\titems.unshift('');\n\n\tconst renderBreadcrumbItems = data => {\n\t\tlet currentKey = '';\n\t\treturn data.map((item, idx) => {\n\t\t\tcurrentKey += `${ item }/`;\n\t\t\tconst arg = currentKey;\n\t\t\tif (idx === 0) {\n\t\t\t\treturn (\n\t\t\t\t\t<Breadcrumb.Item key={ currentKey } onClick={ () => onClick(arg) }><Icon type='home' /></Breadcrumb.Item>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<Breadcrumb.Item key={ currentKey } onClick={ () => onClick(arg) }>{ item }</Breadcrumb.Item>\n\t\t\t);\n\t\t});\n\t};\n\n\treturn (\n\t\t<Breadcrumb className='breadcrumb'>{ renderBreadcrumbItems(items) }</Breadcrumb>\n\t);\n}\n","import React, { useState } from 'react';\nimport { Button, Modal, Upload, Icon, notification } from 'antd';\n\nimport i18next from 'i18next';\n\nimport api from '../api/api';\n\nexport default function UploadModal({ path, onUploadFinished }) {\n\tconst [modalVisible, setModalVisible] = useState(false);\n\tconst [fileList, setFileList] = useState([]);\n\tconst [uploading, setUploading] = useState(false);\n\n\tconst showModal = () => {\n\t\tsetModalVisible(true);\n\t};\n\n\tconst hideModal = () => {\n\t\tsetModalVisible(false);\n\t};\n\n\tconst okModal = () => {\n\t\tif (fileList.length === 0) {\n\t\t\treturn false;\n\t\t}\n\t\tsetUploading(true);\n\n\t\tapi.upload(fileList, path)\n\t\t\t.then(response => {\n\t\t\t\tconst responseData = response.data;\n\n\t\t\t\tif (responseData.status === 'ok') {\n\t\t\t\t\tconst { data } = responseData;\n\t\t\t\t\tconst uploadedFileList = data.uploaded.map(el =>\n\t\t\t\t\t\t<li key={ el.name }>{ el.name }</li>\n\t\t\t\t\t);\n\t\t\t\t\tif (uploadedFileList.length !== 0) {\n\t\t\t\t\t\tnotification.success({\n\t\t\t\t\t\t\tmessage: i18next.t('files_upload_success'),\n\t\t\t\t\t\t\tdescription: <ul>{ uploadedFileList }</ul>\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tconst failedFileList = data.failed.map(el =>\n\t\t\t\t\t\t<li key={ el.name }>{ `${ el.name }: ${ el.errors[0].message }` }</li>\n\t\t\t\t\t);\n\t\t\t\t\tif (failedFileList.length !== 0) {\n\t\t\t\t\t\tnotification.error({\n\t\t\t\t\t\t\tmessage: i18next.t('files_upload_fail'),\n\t\t\t\t\t\t\tdescription: <ul>{ failedFileList }</ul>\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t// reload dir\n\t\t\t\t\tonUploadFinished();\n\t\t\t\t\tsetFileList([]);\n\t\t\t\t\thideModal();\n\t\t\t\t} else {\n\t\t\t\t\tconst msg = responseData.msg || 'Unknown error';\n\t\t\t\t\tnotification.error({\n\t\t\t\t\t\tmessage: i18next.t('files_upload_fail'),\n\t\t\t\t\t\tdescription: msg\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tsetUploading(false);\n\t\t\t}).catch(error => {\n\t\t\t\tnotification.error({\n\t\t\t\t\tmessage: i18next.t('files_upload_fail'),\n\t\t\t\t\tdescription: error.message\n\t\t\t\t});\n\t\t\t\tsetUploading(false);\n\t\t\t});\n\n\t\treturn true;\n\t};\n\n\tconst cancelModal = () => {\n\t\tsetFileList([]);\n\t\thideModal();\n\t};\n\n\tconst beforeUpload = file => {\n\t\tsetFileList([ ...fileList, file ]);\n\t\treturn false;\n\t};\n\n\tconst removeFile = file => {\n\t\tconst index = fileList.indexOf(file);\n\t\tconst newFileList = fileList.slice();\n\t\tnewFileList.splice(index, 1);\n\t\tsetFileList(newFileList);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<Button type='primary' icon='upload' onClick={ showModal }>\n\t\t\t\t{ i18next.t('upload') }\n\t\t\t</Button>\n\t\t\t<Modal title={ i18next.t('upload_files') } visible={ modalVisible } onOk={ okModal }\n\t\t\t\tonCancel={ cancelModal } okText={ uploading ? (<Icon type='loading' />) : i18next.t('ok') } cancelText={ i18next.t('cancel') }>\n\t\t\t\t<Upload fileList={ fileList } beforeUpload={ beforeUpload } onRemove={ removeFile }>\n\t\t\t\t\t<Button>\n\t\t\t\t\t\t<Icon type='upload' />Upload\n\t\t\t\t\t</Button>\n\t\t\t\t</Upload>\n\t\t\t</Modal>\n\t\t</>\n\t);\n}\n","import React, { useState } from 'react';\nimport { Button, Modal, Icon, Input, notification } from 'antd';\n\nimport i18next from 'i18next';\n\nimport api from '../api/api';\n\nexport default function NewFolderModal({ path, onFolderCreated }) {\n\tconst [modalVisible, setModalVisible] = useState(false);\n\tconst [folderName, setFolderName] = useState('');\n\tconst [creating, setCreating] = useState(false);\n\n\tconst showModal = () => {\n\t\tsetModalVisible(true);\n\t};\n\n\tconst hideModal = () => {\n\t\tsetModalVisible(false);\n\t};\n\n\tconst okModal = () => {\n\t\tif (folderName === '') {\n\t\t\treturn false;\n\t\t}\n\t\tsetCreating(true);\n\n\t\tapi.newfolder({ path, folderName })\n\t\t\t.then(response => {\n\t\t\t\tconst responseData = response.data;\n\n\t\t\t\tif (responseData.status === 'ok') {\n\t\t\t\t\tconst { data } = responseData;\n\t\t\t\t\tnotification.success({\n\t\t\t\t\t\tmessage: i18next.t('new_folder_success'),\n\t\t\t\t\t\tdescription: <p>{ data.folderName }</p>\n\t\t\t\t\t});\n\t\t\t\t\t// reload tree\n\t\t\t\t\tonFolderCreated();\n\t\t\t\t\tsetFolderName('');\n\t\t\t\t\thideModal();\n\t\t\t\t} else {\n\t\t\t\t\tconst msg = responseData.msg || 'Unknown error';\n\t\t\t\t\tnotification.error({\n\t\t\t\t\t\tmessage: i18next.t('new_folder_fail'),\n\t\t\t\t\t\tdescription: msg\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tsetCreating(false);\n\t\t\t}).catch(error => {\n\t\t\t\tnotification.error({\n\t\t\t\t\tmessage: i18next.t('new_folder_fail'),\n\t\t\t\t\tdescription: error.message\n\t\t\t\t});\n\t\t\t\tsetCreating(false);\n\t\t\t});\n\n\t\treturn true;\n\t};\n\n\tconst cancelModal = () => {\n\t\tsetFolderName('');\n\t\thideModal();\n\t};\n\n\tconst onChangeName = e => {\n\t\tsetFolderName(e.target.value);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<Button type='primary' icon='folder-add' onClick={ showModal }>\n\t\t\t\t{ i18next.t('new_folder') }\n\t\t\t</Button>\n\t\t\t<Modal title={ i18next.t('new_folder') } visible={ modalVisible } onOk={ okModal }\n\t\t\t\tonCancel={ cancelModal } okText={ creating ? (<Icon type='loading' />) : i18next.t('ok') } cancelText={ i18next.t('cancel') }>\n\t\t\t\t<Input placeholder='Folder name' value={ folderName } onChange={ onChangeName } />\n\t\t\t</Modal>\n\t\t</>\n\t);\n}\n","import React, { useState } from 'react';\n\nimport { ConfigProvider, Layout, Row, Col } from 'antd';\nimport enUS from 'antd/es/locale/en_US';\nimport ukUA from 'antd/es/locale/uk_UA';\nimport 'antd/dist/antd.css';\n\nimport 'moment/locale/uk';\n\nimport i18next from 'i18next';\nimport moment from 'moment';\nimport en from './locale/en.json';\nimport uk from './locale/uk.json';\n\nimport useLang from './hooks/use-lang';\n\nimport DirectoryTable from './components/directory-table';\nimport DirectoryTree from './components/directory-tree';\nimport DirectoryBreadcrumb from './components/directory-breadcrumb';\nimport UploadModal from './components/upload-modal';\nimport NewFolderModal from './components/new-folder-modal';\nimport './app.css';\n\nconst { Header, Footer, Sider, Content } = Layout;\n\nfunction App() {\n\tconst [currentPath, setCurrentPath] = useState('');\n\tconst [selectedKey, setSelectedKey] = useState('/');\n\tconst [refresh, setRefresh] = useState(moment().unix());\n\n\tconst lang = useLang({ en, uk }, 'en');\n\tlet locale;\n\n\tmoment.locale(lang);\n\n\tswitch (lang) {\n\t\tcase 'uk':\n\t\t\tlocale = ukUA;\n\t\t\tbreak;\n\t\tcase 'en':\n\t\tdefault:\n\t\t\tlocale = enUS;\n\t}\n\n\tconst onBreadcrumbClick = key => {\n\t\tsetSelectedKey(key);\n\t\tconst path = key.replace(/^\\/+|\\/+$/g, '');\n\t\tsetCurrentPath(path);\n\t};\n\n\tconst onUploadFinished = () => {\n\t\tsetRefresh(moment().unix());\n\t};\n\n\tconst onFolderCreated = () => {\n\t\tsetRefresh(moment().unix());\n\t};\n\n\tconst onTreeSelect = keys => {\n\t\tlet key = keys.shift();\n\t\tsetSelectedKey(key);\n\t\tkey = key.replace(/^\\/+|\\/+$/g, '');\n\t\tsetCurrentPath(key);\n\t};\n\n\treturn (\n\t\t<ConfigProvider locale={ locale }>\n\t\t\t<div className='app'>\n\t\t\t\t<Layout className='layout'>\n\t\t\t\t\t<Header className='header'>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col span={ 4 }>\n\t\t\t\t\t\t\t\t{ i18next.t('file_manager') }\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col span={ 14 }>\n\t\t\t\t\t\t\t\t<DirectoryBreadcrumb path={ currentPath } onClick={ onBreadcrumbClick } />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col className='pull-right' span={ 3 }>\n\t\t\t\t\t\t\t\t<UploadModal path={ currentPath } onUploadFinished={ onUploadFinished } />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col className='pull-right' span={ 3 }>\n\t\t\t\t\t\t\t\t<NewFolderModal path={ currentPath } onFolderCreated={ onFolderCreated } />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Header>\n\t\t\t\t\t<Layout>\n\t\t\t\t\t\t<Sider className='sider'>\n\t\t\t\t\t\t\t<DirectoryTree onSelect={ onTreeSelect } selectedKeys={ [ selectedKey ] } refresh={ refresh } />\n\t\t\t\t\t\t</Sider>\n\t\t\t\t\t\t<Layout>\n\t\t\t\t\t\t\t<Content className='content'>\n\t\t\t\t\t\t\t\t<DirectoryTable path={ currentPath } refresh={ refresh } />\n\t\t\t\t\t\t\t</Content>\n\t\t\t\t\t\t\t<Footer className='footer'>Footer</Footer>\n\t\t\t\t\t\t</Layout>\n\t\t\t\t\t</Layout>\n\t\t\t\t</Layout>\n\t\t\t</div>\n\t\t</ConfigProvider>\n\t);\n}\n\nexport default App;\n","import i18next from 'i18next';\n// @todo: try to useMemo\n\nexport default function useLang(locales, defaultLang) {\n\n\tlet lang = window.location.pathname.slice(1, 3);\n\tif (locales[lang] === undefined) {\n\t\tlang = defaultLang;\n\t}\n\n\ti18next.init({\n\t\tlng: lang,\n\t\tresources: locales[lang]\n\t});\n\n\treturn lang;\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './app';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}