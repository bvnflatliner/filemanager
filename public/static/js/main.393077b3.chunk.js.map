{"version":3,"sources":["api/api.js","components/cell-edit.jsx","components/context-menu.jsx","components/footer-menu.jsx","hooks/use-deep-effect.js","hooks/use-request.js","components/destination-modal.jsx","components/confirm-delete.jsx","components/directory-table.jsx","components/directory-tree.jsx","components/directory-breadcrumb.jsx","components/upload-modal.jsx","components/new-folder-modal.jsx","app.js","hooks/use-lang.js","index.js"],"names":["http","axios","create","baseURL","params","data","res","URLSearchParams","Object","keys","forEach","key","append","api","tree","get","dir","post","upload","path","args","FormData","file","filesParams","newfolder","copy","rename","delete","CellEdit","initialValue","setEditRowName","record","onRefresh","useState","value","setValue","visible","setVisible","content","onMouseDown","oldname","newname","then","response","responseData","status","notification","success","message","i18next","t","description","name","msg","error","catch","title","trigger","onClick","e","stopPropagation","onChange","target","onBlur","autoFocus","ContextMenu","x","y","onCopyClick","onRenameClick","onDeleteClick","menu","type","Item","Modal","info","icon","direct_link","readOnly","style","left","top","position","FooterMenu","onClickRefresh","onClickCopy","onClickDelete","size","marginLeft","useDeepEffect","callback","deps","useEffect","ref","useRef","isEqual","current","useDeepCompareMemoize","reducer","oldState","newState","useRequest","request","payload","useReducer","loading","total","state","setState","length","DestinationModal","doCopy","hide","refresh","destination","setDestination","dataSource","console","log","onOk","onCancel","treeData","onSelect","treeDefaultExpandAll","dropdownStyle","height","width","ConfirmDelete","count","doDelete","okText","okType","cancelText","TextArea","Input","DirectoryTable","onRefreshBoth","onRefreshTree","filterNameInput","createRef","filterSizeInput","filterPermissionsInput","filterOwnerInput","filterGroupInput","filterSizeOperation","setFilterSizeOperation","filterModifiedOperation","setFilterModifiedOperation","selectedRowKeys","setSelectedRowKeys","contextMenu","setContextMenu","destModalVisible","setDestModalVisible","delModalVisible","setDelModalVisible","oneFile","setOneFile","editRowName","copyClick","deleteClick","fontSize","color","rowSelection","hideDefaultSelections","selections","text","filter","el","includes","columnWidth","columns","dataIndex","sorter","a","b","types","indexOf","filters","onFilter","filterMultiple","render","localeCompare","filterDropdown","setSelectedKeys","selectedKeys","confirm","clearFilters","padding","node","placeholder","onPressEnter","marginBottom","display","marginRight","toString","toLowerCase","onFilterDropdownVisibleChange","setTimeout","select","shouldCellUpdate","prevRecord","eidtable","Group","min","focus","modified","showTime","unix","moment","format","permissions","owner","group","rowKey","scroll","onRow","classList","contains","media_type","autoSize","minRows","maxRows","src","alt","maxWidth","maxHeight","controls","kind","block","onContextMenu","preventDefault","document","addEventListener","onClickOutside","removeEventListener","clientX","clientY","pagination","showTotal","files","successful","failedDirs","errors","dirs","map","failedFiles","DirectoryTree","defaultExpandAll","DirectoryBreadcrumb","items","split","unshift","className","currentKey","item","idx","arg","renderBreadcrumbItems","UploadModal","onUploadFinished","modalVisible","setModalVisible","fileList","setFileList","uploading","setUploading","hideModal","uploadedFileList","uploaded","failedFileList","failed","beforeUpload","onRemove","index","newFileList","slice","splice","NewFolderModal","onFolderCreated","folder","setFolder","creating","setCreating","Header","Layout","Sider","Content","App","locale","currentPath","setCurrentPath","selectedKey","setSelectedKey","refreshTable","setRefreshTable","refreshTree","setRefreshTree","lang","locales","defaultLang","window","location","pathname","undefined","init","lng","resources","useLang","en","uk","ukUA","enUS","onDirectoryClick","replace","refreshBoth","span","shift","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.393077b3.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst http = axios.create({\n\tbaseURL: '//filemanager.com'\n});\n\n// helper to prepare params for post request\nfunction params(data) {\n\tconst res = new URLSearchParams();\n\tObject.keys(data).forEach(key => {\n\t\tres.append(key, data[key]);\n\t});\n\n\treturn res;\n}\n\n// special helper to prepare files as FormData for post request\nfunction filesParams(data) {\n\tconst res = new FormData();\n\tdata.forEach(file => {\n\t\tres.append('files[]', file);\n\t});\n\n\treturn res;\n}\n\nconst api = {\n\n\ttree() {\n\t\treturn http.get('/api/tree');\n\t},\n\tdir(data) {\n\t\treturn http.post('/api/dir', params(data));\n\t},\n\tupload(data, path) {\n\t\tconst args = filesParams(data);\n\t\targs.append('path', path);\n\t\treturn http.post('/api/upload', args);\n\t},\n\tnewfolder(data) {\n\t\treturn http.get('/api/newfolder', { params: data });\n\t},\n\tfile(data) {\n\t\treturn http.get('/api/file', { params: data });\n\t},\n\tcopy(data) {\n\t\treturn http.post('/api/copy', params(data));\n\t},\n\trename(data) {\n\t\treturn http.post('/api/rename', params(data));\n\t},\n\tdelete(data) {\n\t\treturn http.post('/api/delete', params(data));\n\t}\n\n};\n\nexport { api as default };\n","import React, { useState } from 'react';\nimport { Input, Button, Popover, notification } from 'antd';\n\nimport i18next from 'i18next';\n\nimport api from '../api/api';\n\nexport default function CellEdit({ initialValue, setEditRowName, path, record, onRefresh }) {\n\tconst [value, setValue] = useState(initialValue);\n\tconst [visible, setVisible] = useState(false);\n\n\tconst onOkClick = () => {\n\t\tif (value === '') {\n\t\t\tsetEditRowName(initialValue);\n\t\t\treturn;\n\t\t}\n\n\t\tapi.rename({ path, oldname: initialValue, newname: value })\n\t\t\t.then(response => {\n\t\t\t\tconst responseData = response.data;\n\n\t\t\t\tif (responseData.status === 'ok') {\n\t\t\t\t\tnotification.success({\n\t\t\t\t\t\tmessage: i18next.t('renamed_successful'),\n\t\t\t\t\t\tdescription: (\n\t\t\t\t\t\t\t<p>{ i18next.t('file_renamed_successful') }</p>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t)\n\t\t\t\t\t});\n\t\t\t\t\trecord.name = value;\n\t\t\t\t\tonRefresh();\n\t\t\t\t} else {\n\t\t\t\t\tconst msg = responseData.msg || i18next.t('unknown_error');\n\t\t\t\t\tnotification.error({\n\t\t\t\t\t\tmessage: i18next.t('rename_fail'),\n\t\t\t\t\t\tdescription: msg\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}).catch(error => {\n\t\t\t\tnotification.error({\n\t\t\t\t\tmessage: i18next.t('rename_fail'),\n\t\t\t\t\tdescription: error.message\n\t\t\t\t});\n\t\t\t});\n\t};\n\n\tconst cellEditClick = e => {\n\t\te.stopPropagation();\n\t};\n\n\tconst cellEditChange = e => {\n\t\tsetVisible(e.target.value !== initialValue);\n\t\tsetValue(e.target.value);\n\t};\n\n\tconst cellEditCancel = () => {\n\t\tsetEditRowName();\n\t};\n\n\treturn (\n\t\t<Popover\n\t\t\tcontent={(\n\t\t\t\t<>\n\t\t\t\t\t<Button onMouseDown={onOkClick}>{ i18next.t('ok') }</Button>\n\t\t\t\t\t<Button>{ i18next.t('cancel') }</Button>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\ttitle={ i18next.t('save_changed') }\n\t\t\ttrigger=\"focus\"\n\t\t\tvisible={ visible }\n\t\t>\n\t\t\t<Input value={ value }\n\t\t\t\tonClick={ cellEditClick }\n\t\t\t\tonChange={ cellEditChange }\n\t\t\t\tonBlur={ cellEditCancel }\n\t\t\t\tautoFocus\n\t\t\t/>\n\t\t</Popover>\n\t);\n}","import React from 'react';\nimport { Menu, Icon, Modal, Input } from 'antd';\n\nimport i18next from 'i18next';\n\nexport default function ContextMenu({ record, visible, x, y, onCopyClick, onRenameClick, onDeleteClick }) {\n\tif (!visible) {\n\t\treturn <div />;\n\t}\n\n\tconst showLink = () => {\n\t\tModal.info({\n\t\t\ticon: null,\n\t\t\ttitle: i18next.t('direct_link_for_') + record.name,\n\t\t\tcontent: <Input\tvalue={ record.direct_link } readOnly />\n\t\t});\n\t};\n\n\tconst menu = (\n\t\t<Menu>\n\t\t\t{record.type === 'f' && <Menu.Item key='getLink' onClick={ showLink }><Icon type='link' />{i18next.t('get_direct_link')}</Menu.Item>}\n\t\t\t<Menu.Item key='copy' onClick={ () => onCopyClick(record) }><Icon type='copy' />{i18next.t('copy')}</Menu.Item>\n\t\t\t<Menu.Item key='rename' onClick={ () => onRenameClick(record) }><Icon type='edit' />{i18next.t('rename')}</Menu.Item>\n\t\t\t<Menu.Item key='delete' onClick={ () => onDeleteClick(record) }><Icon type='delete' />{i18next.t('delete')}</Menu.Item>\n\t\t</Menu>\n\t);\n\n\treturn (\n\t\t<div style={{ left: `${ x }px`, top: `${ y }px`, position: 'absolute' }}>\n\t\t\t{ menu }\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { Button, Icon } from 'antd';\n\nimport i18next from 'i18next';\n\nexport default function FooterMenu({ visible, onClickRefresh, onClickCopy, onClickDelete }) {\n\n\treturn (\n\t\t<div style={{ position: 'fixed', left: 210 }}>\n\t\t\t<Button size='small' onClick={ onClickRefresh } title={ i18next.t('refresh') }><Icon type='reload' /></Button>\n\t\t\t{visible && (\n\t\t\t\t<Button size='small' onClick={ onClickCopy } title={ i18next.t('copy') } style={{ marginLeft: 5 }}><Icon type='copy' /></Button>\n\t\t\t)}\n\t\t\t{visible && (\n\t\t\t\t<Button size='small' onClick={ onClickDelete } title={ i18next.t('delete') } style={{ marginLeft: 5 }}><Icon type='delete' /></Button>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import { useEffect, useRef } from 'react';\n\nimport { isEqual } from 'lodash';\n\nfunction useDeepCompareMemoize(value) {\n\tconst ref = useRef();\n\n\tif (!isEqual(value, ref.current)) {\n\t\tref.current = value;\n\t}\n\n\treturn ref.current;\n}\n\nexport default function useDeepEffect(callback, deps) {\n\tuseEffect(callback, useDeepCompareMemoize(deps));\n}\n","import { useReducer } from 'react';\n\nimport useDeepEffect from './use-deep-effect';\n\nconst reducer = (oldState, newState) => ({ ...oldState, ...newState });\n\nexport default function useRequest({ request, payload }) {\n\n\tconst initialState = {\n\t\tloading: true,\n\t\terror: null,\n\t\tdata: null,\n\t\ttotal: 0\n\t};\n\n\tconst [ state, setState ] = useReducer(reducer, initialState);\n\n\tuseDeepEffect(() => {\n\n\t\tsetState({ loading: true, error: null });\n\t\trequest(payload)\n\t\t\t.then(response => {\n\n\t\t\t\tconst responseData = response.data;\n\n\t\t\t\tif (responseData.status === 'ok') {\n\t\t\t\t\tconst { data } = responseData;\n\t\t\t\t\tconst total = responseData.total ? responseData.total : data.length;\n\n\t\t\t\t\t// @todo: if we add schema, parse data here\n\n\t\t\t\t\tsetState({ loading: false, data, total });\n\t\t\t\t} else {\n\t\t\t\t\tsetState({ loading: false, error: responseData.msg ? responseData.msg : 'Unknown error', data: null, total: 0 });\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tsetState({ loading: false, error: error.message, data: null, total: 0 });\n\t\t\t});\n\t}, [\n\t\trequest,\n\t\tpayload\n\t]);\n\n\treturn state;\n}\n","import React, { useState } from 'react';\nimport { Modal, TreeSelect } from 'antd';\n\nimport i18next from 'i18next';\n\nimport api from '../api/api';\nimport useRequest from '../hooks/use-request';\n\nexport default function DestinationModal({ visible, doCopy, hide, refresh }) {\n\tconst [ destination, setDestination ] = useState('');\n\n\tconst dataSource = useRequest({\n\t\trequest: api.tree,\n\t\tpayload: { refresh }\n\t});\n\n\tif (dataSource.loading) {\n\t\treturn null;\n\t}\n\n\tif (dataSource.error) {\n\t\tconsole.log(`Error: ${ dataSource.error }`);\n\t\treturn null;\n\t}\n\n\tconst onSelect = data => {\n\t\tsetDestination(data);\n\t};\n\n\tconst onCancel = () => {\n\t\tsetDestination('');\n\t\thide();\n\t};\n\n\tconst onOk = () => {\n\t\tdoCopy(destination);\n\t\tsetDestination('');\n\t\thide();\n\t};\n\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ i18next.t('copy_destination') }\n\t\t\tvisible={ visible }\n\t\t\tonOk={ onOk }\n\t\t\tonCancel={ onCancel }\n\t\t>\n\t\t\t<TreeSelect value={ destination } treeData={ [ dataSource.data ] } onSelect={ onSelect } treeDefaultExpandAll dropdownStyle={{ height: 300 }} style={{ width: 400 }} />\n\t\t</Modal>\n\t);\n}\n","import React from 'react';\nimport { Modal } from 'antd';\n\nimport i18next from 'i18next';\n\nexport default function ConfirmDelete({ visible, count, doDelete, hide }) {\n\tconst onOk = () => {\n\t\tdoDelete();\n\t\thide();\n\t};\n\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ i18next.t('confirm_deletion') }\n\t\t\tvisible={ visible }\n\t\t\tokText={ i18next.t('yes') }\n\t\t\tokType=\"danger\"\n\t\t\tcancelText={ i18next.t('no') }\n\t\t\tonOk={ onOk }\n\t\t\tonCancel={ hide }\n\t\t>\n\t\t\t<p>{ i18next.t('are_you_sure_to_delete_') + count + i18next.t('_files_dirs') + '?' }</p>\n\t\t</Modal>\n\t);\n}","import React, { useState, createRef, useEffect } from 'react';\nimport { Table, Input, Button, Radio, InputNumber, DatePicker, Spin, Icon, Modal, notification } from 'antd';\n\nimport i18next from 'i18next';\nimport moment from 'moment';\n\nimport CellEdit from './cell-edit';\nimport ContextMenu from './context-menu';\nimport FooterMenu from './footer-menu';\nimport DestinationModal from './destination-modal';\nimport ConfirmDelete from './confirm-delete';\n\nimport api from '../api/api';\nimport useRequest from '../hooks/use-request';\nimport './directory-table.css';\n\nconst { TextArea } = Input;\n\nexport default function DirectoryTable({ path, refresh, onRefreshBoth, onRefreshTree, onClick }) {\n\tlet filterNameInput = createRef();\n\tlet filterSizeInput = createRef();\n\tlet filterPermissionsInput = createRef();\n\tlet filterOwnerInput = createRef();\n\tlet filterGroupInput = createRef();\n\tconst [ filterSizeOperation, setFilterSizeOperation ] = useState('gt');\n\tconst [ filterModifiedOperation, setFilterModifiedOperation ] = useState('gt');\n\tconst [ selectedRowKeys, setSelectedRowKeys ] = useState([]);\n\tconst [ contextMenu, setContextMenu ] = useState({\n\t\tvisible: false,\n\t\tx: 0,\n\t\ty: 0\n\t});\n\tconst [ destModalVisible, setDestModalVisible] = useState(false);\n\tconst [ delModalVisible, setDelModalVisible ] = useState(false);\n\tconst [ oneFile, setOneFile ] = useState();\n\tconst [ editRowName, setEditRowName ] = useState();\n\n\tconst dataSource = useRequest({\n\t\trequest: api.dir,\n\t\tpayload: { path, refresh }\n\t});\n\n\tconst copyClick = () => {\n\t\tsetDestModalVisible(true);\n\t};\n\n\tconst deleteClick = () => {\n\t\tsetDelModalVisible(true);\n\t};\n\n\tconst contextCopyClick = record => {\n\t\tsetOneFile(record.name);\n\t\tsetDestModalVisible(true);\n\t};\n\n\tconst contextRenameClick = record => {\n\t\tsetEditRowName(record.name);\n\t};\n\n\tconst contextDeleteClick = record => {\n\t\tsetOneFile(record.name);\n\t\tconsole.log(oneFile);\n\t\tsetDelModalVisible(true);\n\t};\n\n\tuseEffect(() => {\n\t\tsetSelectedRowKeys([]);\n\t}, [path]);\n\n\tif (dataSource.loading) {\n\t\treturn (\n\t\t\t<Spin size='large' style={{ position: 'relative', top: '45%', left: '50%' }} />\n\t\t);\n\t}\n\n\tif (dataSource.error) {\n\t\tconsole.log(`Error: ${ dataSource.error }`);\n\t\treturn (\n\t\t\t<Icon type='warning' style={{ fontSize: '1.6em', color: 'red', position: 'relative', top: 25, left: 25 }} />\n\t\t);\n\t}\n\n\tconst doCopy = destination => {\n\t\tconst files = oneFile ? [oneFile] : selectedRowKeys;\n\t\tapi.copy({ path, destination, files })\n\t\t\t.then(response => {\n\t\t\t\tconst responseData = response.data;\n\n\t\t\t\tif (responseData.status === 'ok') {\n\t\t\t\t\tconst { data } = responseData;\n\t\t\t\t\tconst { successful } = data;\n\t\t\t\t\tconst failedDirs = data.errors.dirs.map(el =>\n\t\t\t\t\t\t<li key={ el }>{ el }</li>\n\t\t\t\t\t);\n\t\t\t\t\tconst failedFiles = data.errors.files.map(el =>\n\t\t\t\t\t\t<li key={ el }>{ el }</li>\n\t\t\t\t\t);\n\t\t\t\t\tnotification.success({\n\t\t\t\t\t\tmessage: i18next.t('copied_successful'),\n\t\t\t\t\t\tdescription: (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<p>{ i18next.t('copied') + successful + i18next.t('_files') }</p>\n\t\t\t\t\t\t\t\t{ failedDirs.length > 0 && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<p>{ i18next.t('dirs_failed') }</p>\n\t\t\t\t\t\t\t\t\t\t<ul>{ failedDirs }</ul>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{ failedFiles.length > 0 && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<p>{ i18next.t('files_failed') }</p>\n\t\t\t\t\t\t\t\t\t\t<ul>{ failedFiles }</ul>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)\n\t\t\t\t\t});\n\t\t\t\t\tsetTimeout(onRefreshBoth, 5);\n\t\t\t\t} else {\n\t\t\t\t\tconst msg = responseData.msg || i18next.t('unknown_error');\n\t\t\t\t\tnotification.error({\n\t\t\t\t\t\tmessage: i18next.t('copy_fail'),\n\t\t\t\t\t\tdescription: msg\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}).catch(error => {\n\t\t\t\tnotification.error({\n\t\t\t\t\tmessage: i18next.t('copy_fail'),\n\t\t\t\t\tdescription: error.message\n\t\t\t\t});\n\t\t\t});\n\n\t\tsetSelectedRowKeys([]);\n\t\tsetOneFile();\n\t\treturn true;\n\t};\n\n\tconst doDelete = () => {\n\t\tconst files = oneFile ? [oneFile] : selectedRowKeys;\n\t\tapi.delete({ path, files })\n\t\t\t.then(response => {\n\t\t\t\tconst responseData = response.data;\n\t\t\t\tconst { data } = responseData;\n\t\t\t\tconst { successful } = data;\n\n\t\t\t\tif (responseData.status === 'ok') {\n\t\t\t\t\tnotification.success({\n\t\t\t\t\t\tmessage: i18next.t('deleted_successful'),\n\t\t\t\t\t\tdescription: (\n\t\t\t\t\t\t\t<p>{ successful + i18next.t('_files_dirs_deleted_successful') }</p>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t)\n\t\t\t\t\t});\n\t\t\t\t\tsetTimeout(onRefreshBoth, 5);\n\t\t\t\t} else {\n\t\t\t\t\tconst msg = responseData.msg || i18next.t('unknown_error');\n\t\t\t\t\tnotification.error({\n\t\t\t\t\t\tmessage: i18next.t('delete_fail'),\n\t\t\t\t\t\tdescription: msg\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}).catch(error => {\n\t\t\t\tnotification.error({\n\t\t\t\t\tmessage: i18next.t('delete_fail'),\n\t\t\t\t\tdescription: error.message\n\t\t\t\t});\n\t\t\t});\n\n\t\tsetSelectedRowKeys([]);\n\t\tsetOneFile();\n\t\treturn true;\n\t};\n\n\tconst hideDestModal = () => {\n\t\tsetOneFile();\n\t\tsetDestModalVisible(false);\n\t};\n\n\tconst hideDelModal = () => {\n\t\tsetOneFile();\n\t\tsetDelModalVisible(false);\n\t};\n\n\tconst rowSelection = {\n\t\tselectedRowKeys,\n\t\tonChange: keys => {\n\t\t\tsetSelectedRowKeys(keys);\n\t\t},\n\t\thideDefaultSelections: true,\n\t\tselections: [\n\t\t\t{\n\t\t\t\tkey: 'all-data',\n\t\t\t\ttext: i18next.t('all_data'),\n\t\t\t\tonSelect: data => {\n\t\t\t\t\tsetSelectedRowKeys(data);\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'no-data',\n\t\t\t\ttext: i18next.t('no_data'),\n\t\t\t\tonSelect: () => {\n\t\t\t\t\tsetSelectedRowKeys([]);\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'invert-data',\n\t\t\t\ttext: i18next.t('invert_data'),\n\t\t\t\tonSelect: data => {\n\t\t\t\t\tsetSelectedRowKeys(data.filter(el => !selectedRowKeys.includes(el)));\n\t\t\t\t}\n\t\t\t}\n\t\t],\n\t\tcolumnWidth: 50\n\t};\n\n\tconst columns = [\n\t\t{\n\t\t\ttitle: i18next.t('type'),\n\t\t\tdataIndex: 'type',\n\t\t\tkey: 'type',\n\t\t\tsorter: (a, b) => {\n\t\t\t\tconst types = ['d', 'f'];\n\t\t\t\treturn types.indexOf(a.type) - types.indexOf(b.type);\n\t\t\t},\n\t\t\tfilters: [\n\t\t\t\t{ text: i18next.t('dir'), value: 'd' },\n\t\t\t\t{ text: i18next.t('file'), value: 'f' }\n\t\t\t],\n\t\t\tonFilter: (value, data) => data.type.indexOf(value) === 0,\n\t\t\tfilterMultiple: false,\n\t\t\trender: value => {\n\t\t\t\tlet res = '';\n\t\t\t\tswitch (value) {\n\t\t\t\t\tcase 'd':\n\t\t\t\t\t\tres = <Icon type='folder' />;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'f':\n\t\t\t\t\t\tres = <Icon type='file' />;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tres = <span>value</span>;\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t},\n\t\t\twidth: 90\n\t\t},\n\t\t{\n\t\t\ttitle: i18next.t('name'),\n\t\t\tdataIndex: 'name',\n\t\t\tkey: 'name',\n\t\t\tsorter: (a, b) => a.name.localeCompare(b.name),\n\t\t\tfilterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n\t\t\t\t<div style={{ padding: 8 }}>\n\t\t\t\t\t<Input ref={ node => { filterNameInput = node; } } placeholder={ i18next.t('filter_name') }\n\t\t\t\t\t\tvalue={ selectedKeys[0] }\n\t\t\t\t\t\tonChange={ e => setSelectedKeys(e.target.value ? [e.target.value] : []) }\n\t\t\t\t\t\tonPressEnter={ confirm }\n\t\t\t\t\t\tstyle={{ width: 188, marginBottom: 8, display: 'block' }}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='primary' onClick={ confirm }\n\t\t\t\t\t\ticon='filter' size='small' style={{ width: 90, marginRight: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ i18next.t('apply') }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ clearFilters } size='small' style={{ width: 90 }}>\n\t\t\t\t\t\t{ i18next.t('reset') }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tonFilter: (value, record) => record.name.toString().toLowerCase().includes(value.toLowerCase()),\n\t\t\tonFilterDropdownVisibleChange: visible => {\n\t\t\t\tif (visible) {\n\t\t\t\t\tsetTimeout(() => filterNameInput.select());\n\t\t\t\t}\n\t\t\t},\n\t\t\tshouldCellUpdate: (record, prevRecord) => record.name !== prevRecord.name,\n\t\t\trender: (value, record) => {\n\t\t\t\treturn value === editRowName ? (\n\t\t\t\t\t<CellEdit initialValue={ value } setEditRowName={ setEditRowName } path={ path } record={ record } onRefresh={ onRefreshBoth } />\n\t\t\t\t) : (\n\t\t\t\t\t<span>{ value }</span>\n\t\t\t\t);\n\t\t\t},\n\t\t\teidtable: true,\n\t\t\twidth: 230\n\t\t},\n\t\t{\n\t\t\ttitle: i18next.t('size'),\n\t\t\tdataIndex: 'size',\n\t\t\tkey: 'size',\n\t\t\tsorter: (a, b) => a.size - b.size,\n\t\t\tfilterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n\t\t\t\t<div style={{ padding: 8 }}>\n\t\t\t\t\t<Radio.Group value={ filterSizeOperation }\n\t\t\t\t\t\tonChange={ e => setFilterSizeOperation(e.target.value) }\n\t\t\t\t\t\tstyle={{ marginBottom: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Radio value='gt'>&gt;</Radio>\n\t\t\t\t\t\t<Radio value='lt'>&lt;</Radio>\n\t\t\t\t\t</Radio.Group>\n\t\t\t\t\t<InputNumber ref={ node => { filterSizeInput = node; } } placeholder={ i18next.t('filter_size') }\n\t\t\t\t\t\tvalue={ selectedKeys[0] } min={ 0 } onPressEnter={ confirm }\n\t\t\t\t\t\tonChange={ value => setSelectedKeys(value ? [ value ] : []) }\n\t\t\t\t\t\tstyle={{ width: 188, marginBottom: 8, display: 'block' }}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='primary' onClick={ confirm }\n\t\t\t\t\t\ticon='filter' size='small' style={{ width: 90, marginRight: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ i18next.t('apply') }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ clearFilters } size='small' style={{ width: 90 }}>\n\t\t\t\t\t\t{ i18next.t('reset') }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tonFilter: (value, record) => filterSizeOperation === 'lt' ? record.size < value : record.size > value,\n\t\t\tonFilterDropdownVisibleChange: visible => {\n\t\t\t\tif (visible) {\n\t\t\t\t\tsetTimeout(() => filterSizeInput.focus());\n\t\t\t\t}\n\t\t\t},\n\t\t\twidth: 120\n\t\t},\n\t\t{\n\t\t\ttitle: i18next.t('modified'),\n\t\t\tdataIndex: 'modified',\n\t\t\tkey: 'modified',\n\t\t\tsorter: (a, b) => a.modified - b.modified,\n\t\t\tfilterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n\t\t\t\t<div style={{ padding: 8 }}>\n\t\t\t\t\t<Radio.Group value={ filterModifiedOperation }\n\t\t\t\t\t\tonChange={ e => setFilterModifiedOperation(e.target.value) }\n\t\t\t\t\t\tstyle={{ marginBottom: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Radio value='gt'>&gt;</Radio>\n\t\t\t\t\t\t<Radio value='lt'>&lt;</Radio>\n\t\t\t\t\t</Radio.Group>\n\t\t\t\t\t<DatePicker showTime placeholder={ i18next.t('filter_modified') } value={ selectedKeys[0] }\n\t\t\t\t\t\tonPressEnter={ confirm } onChange={ value => setSelectedKeys(value ? [ value ] : []) }\n\t\t\t\t\t\tstyle={{ width: 188, marginBottom: 8, display: 'block' }}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='primary' onClick={ confirm }\n\t\t\t\t\t\ticon='filter' size='small' style={{ width: 90, marginRight: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ i18next.t('apply') }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ clearFilters } size='small' style={{ width: 90 }}>\n\t\t\t\t\t\t{ i18next.t('reset') }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tonFilter: (value, record) => filterModifiedOperation === 'lt' ? record.modified < value.unix() : record.modified > value.unix(),\n\t\t\trender: value => moment.unix(value).format('LLL'),\n\t\t\twidth: 240\n\t\t},\n\t\t{\n\t\t\ttitle: i18next.t('permissions'),\n\t\t\tdataIndex: 'permissions',\n\t\t\tkey: 'permissions',\n\t\t\tsorter: (a, b) => a.permissions.localeCompare(b.permissions),\n\t\t\tfilterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n\t\t\t\t<div style={{ padding: 8 }}>\n\t\t\t\t\t<Input ref={ node => { filterPermissionsInput = node; } } placeholder={ i18next.t('filter_permissions') }\n\t\t\t\t\t\tvalue={ selectedKeys[0] }\n\t\t\t\t\t\tonChange={ e => setSelectedKeys(e.target.value ? [e.target.value] : []) }\n\t\t\t\t\t\tonPressEnter={ confirm }\n\t\t\t\t\t\tstyle={{ width: 188, marginBottom: 8, display: 'block' }}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='primary' onClick={ confirm }\n\t\t\t\t\t\ticon='filter' size='small' style={{ width: 90, marginRight: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ i18next.t('apply') }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ clearFilters } size='small' style={{ width: 90 }}>\n\t\t\t\t\t\t{ i18next.t('reset') }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tonFilter: (value, record) => record.permissions.toString().toLowerCase().includes(value.toLowerCase()),\n\t\t\tonFilterDropdownVisibleChange: visible => {\n\t\t\t\tif (visible) {\n\t\t\t\t\tsetTimeout(() => filterPermissionsInput.select());\n\t\t\t\t}\n\t\t\t},\n\t\t\twidth: 140\n\t\t},\n\t\t{\n\t\t\ttitle: i18next.t('owner'),\n\t\t\tdataIndex: 'owner',\n\t\t\tkey: 'owner',\n\t\t\tsorter: (a, b) => a.owner.localeCompare(b.owner),\n\t\t\tfilterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n\t\t\t\t<div style={{ padding: 8 }}>\n\t\t\t\t\t<Input ref={ node => { filterOwnerInput = node; } } placeholder={ i18next.t('filter_owner') }\n\t\t\t\t\t\tvalue={ selectedKeys[0] }\n\t\t\t\t\t\tonChange={ e => setSelectedKeys(e.target.value ? [e.target.value] : []) }\n\t\t\t\t\t\tonPressEnter={ confirm }\n\t\t\t\t\t\tstyle={{ width: 188, marginBottom: 8, display: 'block' }}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='primary' onClick={ confirm }\n\t\t\t\t\t\ticon='filter' size='small' style={{ width: 90, marginRight: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ i18next.t('apply') }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ clearFilters } size='small' style={{ width: 90 }}>\n\t\t\t\t\t\t{ i18next.t('reset') }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tonFilter: (value, record) => record.owner.toString().toLowerCase().includes(value.toLowerCase()),\n\t\t\tonFilterDropdownVisibleChange: visible => {\n\t\t\t\tif (visible) {\n\t\t\t\t\tsetTimeout(() => filterOwnerInput.select());\n\t\t\t\t}\n\t\t\t},\n\t\t\twidth: 140\n\t\t},\n\t\t{\n\t\t\ttitle: i18next.t('group'),\n\t\t\tdataIndex: 'group',\n\t\t\tkey: 'group',\n\t\t\tsorter: (a, b) => a.group.localeCompare(b.group),\n\t\t\tfilterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n\t\t\t\t<div style={{ padding: 8 }}>\n\t\t\t\t\t<Input ref={ node => { filterGroupInput = node; } } placeholder={ i18next.t('filter_group') }\n\t\t\t\t\t\tvalue={ selectedKeys[0] }\n\t\t\t\t\t\tonChange={ e => setSelectedKeys(e.target.value ? [e.target.value] : []) }\n\t\t\t\t\t\tonPressEnter={ confirm }\n\t\t\t\t\t\tstyle={{ width: 188, marginBottom: 8, display: 'block' }}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='primary' onClick={ confirm }\n\t\t\t\t\t\ticon='filter' size='small' style={{ width: 90, marginRight: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ i18next.t('apply') }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ clearFilters } size='small' style={{ width: 90 }}>\n\t\t\t\t\t\t{ i18next.t('reset') }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tonFilter: (value, record) => record.group.toString().toLowerCase().includes(value.toLowerCase()),\n\t\t\tonFilterDropdownVisibleChange: visible => {\n\t\t\t\tif (visible) {\n\t\t\t\t\tsetTimeout(() => filterGroupInput.select());\n\t\t\t\t}\n\t\t\t},\n\t\t\twidth: 140\n\t\t}\n\t];\n\n\tconst onRow = record => ({\n\t\tonClick: e => {\n\t\t\tif (e.target.classList.contains('ant-checkbox-input')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (record.type === 'd') {\n\t\t\t\tonClick(`${ path ? `/${ path }` : '' }/${ record.name }/`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet content;\n\t\t\tswitch (record.media_type) {\n\t\t\t\tcase 'text':\n\t\t\t\t\tapi.file({ path, name: record.name })\n\t\t\t\t\t\t.then(response => {\n\t\t\t\t\t\t\tconst responseData = response.data;\n\t\t\t\t\t\t\tif (responseData.status === 'ok') {\n\t\t\t\t\t\t\t\tconst { data } = responseData;\n\t\t\t\t\t\t\t\tcontent = <TextArea autoSize={{ minRows: 4, maxRows: 16 }} value={ data.content } />;\n\t\t\t\t\t\t\t\tModal.info({\n\t\t\t\t\t\t\t\t\ticon: null,\n\t\t\t\t\t\t\t\t\twidth: '80%',\n\t\t\t\t\t\t\t\t\ttitle: i18next.t('view_') + record.name,\n\t\t\t\t\t\t\t\t\tcontent\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'image':\n\t\t\t\t\tcontent = (<div><img src={ record.direct_link } alt={ record.name } style={{ maxWidth: '100%', maxHeight: '100%' }} /></div>);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'audio':\n\t\t\t\t\tcontent = (<audio controls><source src={ record.direct_link } /><track kind='captions' /></audio>);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'video':\n\t\t\t\t\tcontent = (<video style={{ maxWidth: '100%', maxHeight: '100%' }} controls><source src={ record.direct_link } /><track kind='captions' /></video>);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'binary':\n\t\t\t\t\tcontent = (<Button type='dashed' block>{ i18next.t('binary_file') }</Button>);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tcontent = (<Button type='dashed' block>{ i18next.t('unknown_file_format') }</Button>);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (content) {\n\t\t\t\tModal.info({\n\t\t\t\t\ticon: null,\n\t\t\t\t\twidth: '80%',\n\t\t\t\t\ttitle: i18next.t('view_') + record.name,\n\t\t\t\t\tcontent\n\t\t\t\t});\n\t\t\t}\n\n\t\t},\n\t\tonContextMenu: e => {\n\t\t\te.preventDefault();\n\t\t\tif (!contextMenu.visible) {\n\t\t\t\tdocument.addEventListener(`click`, function onClickOutside() {\n\t\t\t\t\tsetContextMenu({ visible: false, x: 0, y: 0 });\n\t\t\t\t\tdocument.removeEventListener(`click`, onClickOutside);\n\t\t\t\t});\n\t\t\t}\n\t\t\tsetContextMenu({\n\t\t\t\trecord,\n\t\t\t\tvisible: true,\n\t\t\t\tx: e.clientX,\n\t\t\t\ty: e.clientY\n\t\t\t});\n\t\t}\n\t});\n\n\tconst { record, visible, x, y } = contextMenu;\n\n\treturn (\n\t\t<>\n\t\t\t<Table dataSource={ dataSource.data } total={ dataSource.total } columns={ columns } rowKey='name'\n\t\t\t\tscroll={{ y: 'calc(100vh - 180px)', x: true }} size='middle'\n\t\t\t\trowSelection={ rowSelection } onRow={ onRow }\n\t\t\t\tpagination={{ showTotal: total => (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<FooterMenu visible={ selectedRowKeys.length > 0 } onClickRefresh={ onRefreshBoth } onClickCopy={ copyClick } onClickDelete={ deleteClick } />\n\t\t\t\t\t\t{i18next.t('total_') + total + i18next.t('_items')}\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t)}}\n\t\t\t/>\n\t\t\t<ContextMenu record={ record } visible={ visible } x={ x } y={ y } onCopyClick={ contextCopyClick } onRenameClick={ contextRenameClick } onDeleteClick={ contextDeleteClick } />\n\t\t\t<DestinationModal visible={ destModalVisible } doCopy={ doCopy } hide={ hideDestModal } refresh={ refresh } />\n\t\t\t<ConfirmDelete visible={ delModalVisible } count={ (oneFile ? [oneFile] : selectedRowKeys).length } doDelete={ doDelete } hide={ hideDelModal } />\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { Tree, Spin, Icon } from 'antd';\n\nimport api from '../api/api';\nimport useRequest from '../hooks/use-request';\n\nexport default function DirectoryTree({ onSelect, selectedKeys, refresh }) {\n\n\tconst dataSource = useRequest({\n\t\trequest: api.tree,\n\t\tpayload: { refresh }\n\t});\n\n\tif (dataSource.loading) {\n\t\treturn (\n\t\t\t<Spin style={{ position: 'relative', top: '40%', left: '45%' }} />\n\t\t);\n\t}\n\n\tif (dataSource.error) {\n\t\tconsole.log(`Error: ${ dataSource.error }`);\n\t\treturn (\n\t\t\t<Icon type='warning' style={{ fontSize: '1.4em', color: 'red', position: 'relative', top: 15, left: 15 }} />\n\t\t);\n\t}\n\n\treturn <Tree treeData={ [ dataSource.data ] } onSelect={ onSelect } selectedKeys={ selectedKeys } defaultExpandAll />;\n}\n","import React from 'react';\nimport { Breadcrumb, Icon } from 'antd';\n\nexport default function DirectoryBreadcrumb({ path, onClick }) {\n\tconst items = path.split('/');\n\titems.unshift('');\n\n\tconst renderBreadcrumbItems = data => {\n\t\tlet currentKey = '';\n\t\treturn data.map((item, idx) => {\n\t\t\tcurrentKey += `${ item }/`;\n\t\t\tconst arg = currentKey;\n\t\t\tif (idx === 0) {\n\t\t\t\treturn (\n\t\t\t\t\t<Breadcrumb.Item key={ currentKey } onClick={ () => onClick(arg) }><Icon type='home' /></Breadcrumb.Item>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<Breadcrumb.Item key={ currentKey } onClick={ () => onClick(arg) }>{ item }</Breadcrumb.Item>\n\t\t\t);\n\t\t});\n\t};\n\n\treturn (\n\t\t<Breadcrumb className='breadcrumb'>{ renderBreadcrumbItems(items) }</Breadcrumb>\n\t);\n}\n","import React, { useState } from 'react';\nimport { Button, Modal, Upload, Icon, notification } from 'antd';\n\nimport i18next from 'i18next';\n\nimport api from '../api/api';\n\nexport default function UploadModal({ path, onUploadFinished }) {\n\tconst [modalVisible, setModalVisible] = useState(false);\n\tconst [fileList, setFileList] = useState([]);\n\tconst [uploading, setUploading] = useState(false);\n\n\tconst showModal = () => {\n\t\tsetModalVisible(true);\n\t};\n\n\tconst hideModal = () => {\n\t\tsetModalVisible(false);\n\t};\n\n\tconst okModal = () => {\n\t\tif (fileList.length === 0) {\n\t\t\treturn false;\n\t\t}\n\t\tsetUploading(true);\n\n\t\tapi.upload(fileList, path)\n\t\t\t.then(response => {\n\t\t\t\tconst responseData = response.data;\n\n\t\t\t\tif (responseData.status === 'ok') {\n\t\t\t\t\tconst { data } = responseData;\n\t\t\t\t\tconst uploadedFileList = data.uploaded.map(el =>\n\t\t\t\t\t\t<li key={ el.name }>{ el.name }</li>\n\t\t\t\t\t);\n\t\t\t\t\tif (uploadedFileList.length !== 0) {\n\t\t\t\t\t\tnotification.success({\n\t\t\t\t\t\t\tmessage: i18next.t('files_upload_success'),\n\t\t\t\t\t\t\tdescription: <ul>{ uploadedFileList }</ul>\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tconst failedFileList = data.failed.map(el =>\n\t\t\t\t\t\t<li key={ el.name }>{ `${ el.name }: ${ el.errors[0].message }` }</li>\n\t\t\t\t\t);\n\t\t\t\t\tif (failedFileList.length !== 0) {\n\t\t\t\t\t\tnotification.error({\n\t\t\t\t\t\t\tmessage: i18next.t('files_upload_fail'),\n\t\t\t\t\t\t\tdescription: <ul>{ failedFileList }</ul>\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t// reload dir\n\t\t\t\t\tonUploadFinished();\n\t\t\t\t\tsetFileList([]);\n\t\t\t\t\thideModal();\n\t\t\t\t} else {\n\t\t\t\t\tconst msg = responseData.msg || i18next.t('unknown_error');\n\t\t\t\t\tnotification.error({\n\t\t\t\t\t\tmessage: i18next.t('files_upload_fail'),\n\t\t\t\t\t\tdescription: msg\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tsetUploading(false);\n\t\t\t}).catch(error => {\n\t\t\t\tnotification.error({\n\t\t\t\t\tmessage: i18next.t('files_upload_fail'),\n\t\t\t\t\tdescription: error.message\n\t\t\t\t});\n\t\t\t\tsetUploading(false);\n\t\t\t});\n\n\t\treturn true;\n\t};\n\n\tconst cancelModal = () => {\n\t\tsetFileList([]);\n\t\thideModal();\n\t};\n\n\tconst beforeUpload = file => {\n\t\tsetFileList([ ...fileList, file ]);\n\t\treturn false;\n\t};\n\n\tconst removeFile = file => {\n\t\tconst index = fileList.indexOf(file);\n\t\tconst newFileList = fileList.slice();\n\t\tnewFileList.splice(index, 1);\n\t\tsetFileList(newFileList);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<Button type='primary' icon='upload' onClick={ showModal }>\n\t\t\t\t{ i18next.t('upload') }\n\t\t\t</Button>\n\t\t\t<Modal title={ i18next.t('upload_files') } visible={ modalVisible } onOk={ okModal }\n\t\t\t\tonCancel={ cancelModal } okText={ uploading ? (<Icon type='loading' />) : i18next.t('ok') } cancelText={ i18next.t('cancel') }>\n\t\t\t\t<Upload fileList={ fileList } beforeUpload={ beforeUpload } onRemove={ removeFile }>\n\t\t\t\t\t<Button>\n\t\t\t\t\t\t<Icon type='upload' />{i18next.t('upload')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Upload>\n\t\t\t</Modal>\n\t\t</>\n\t);\n}\n","import React, { useState } from 'react';\nimport { Button, Modal, Icon, Input, notification } from 'antd';\n\nimport i18next from 'i18next';\n\nimport api from '../api/api';\n\nexport default function NewFolderModal({ path, onFolderCreated }) {\n\tconst [modalVisible, setModalVisible] = useState(false);\n\tconst [folder, setFolder] = useState('');\n\tconst [creating, setCreating] = useState(false);\n\n\tconst showModal = () => {\n\t\tsetModalVisible(true);\n\t};\n\n\tconst hideModal = () => {\n\t\tsetModalVisible(false);\n\t};\n\n\tconst okModal = () => {\n\t\tif (folder === '') {\n\t\t\treturn false;\n\t\t}\n\t\tsetCreating(true);\n\n\t\tapi.newfolder({ path, folder })\n\t\t\t.then(response => {\n\t\t\t\tconst responseData = response.data;\n\n\t\t\t\tif (responseData.status === 'ok') {\n\t\t\t\t\tconst { data } = responseData;\n\t\t\t\t\tnotification.success({\n\t\t\t\t\t\tmessage: i18next.t('new_folder_success'),\n\t\t\t\t\t\tdescription: <p>{ data.folder }</p>\n\t\t\t\t\t});\n\t\t\t\t\t// reload tree\n\t\t\t\t\tonFolderCreated();\n\t\t\t\t\tsetFolder('');\n\t\t\t\t\thideModal();\n\t\t\t\t} else {\n\t\t\t\t\tconst msg = responseData.msg || i18next.t('unknown_error');\n\t\t\t\t\tnotification.error({\n\t\t\t\t\t\tmessage: i18next.t('new_folder_fail'),\n\t\t\t\t\t\tdescription: msg\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tsetCreating(false);\n\t\t\t}).catch(error => {\n\t\t\t\tnotification.error({\n\t\t\t\t\tmessage: i18next.t('new_folder_fail'),\n\t\t\t\t\tdescription: error.message\n\t\t\t\t});\n\t\t\t\tsetCreating(false);\n\t\t\t});\n\n\t\treturn true;\n\t};\n\n\tconst cancelModal = () => {\n\t\tsetFolder('');\n\t\thideModal();\n\t};\n\n\tconst onChangeName = e => {\n\t\tsetFolder(e.target.value);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<Button type='primary' icon='folder-add' onClick={ showModal } style={{ marginLeft: 10 }}>\n\t\t\t\t{ i18next.t('new_folder') }\n\t\t\t</Button>\n\t\t\t<Modal title={ i18next.t('new_folder') } visible={ modalVisible } onOk={ okModal }\n\t\t\t\tonCancel={ cancelModal } okText={ creating ? (<Icon type='loading' />) : i18next.t('ok') } cancelText={ i18next.t('cancel') }>\n\t\t\t\t<Input placeholder={i18next.t('folder_name')} value={ folder } onChange={ onChangeName } autoFocus />\n\t\t\t</Modal>\n\t\t</>\n\t);\n}\n","import React, { useState } from 'react';\n\nimport { ConfigProvider, Layout, Row, Col } from 'antd';\nimport enUS from 'antd/es/locale/en_US';\nimport ukUA from 'antd/es/locale/uk_UA';\nimport 'antd/dist/antd.css';\n\nimport 'moment/locale/uk';\n\nimport i18next from 'i18next';\nimport moment from 'moment';\nimport en from './locale/en.json';\nimport uk from './locale/uk.json';\n\nimport useLang from './hooks/use-lang';\n\nimport DirectoryTable from './components/directory-table';\nimport DirectoryTree from './components/directory-tree';\nimport DirectoryBreadcrumb from './components/directory-breadcrumb';\nimport UploadModal from './components/upload-modal';\nimport NewFolderModal from './components/new-folder-modal';\nimport './app.css';\n\nconst { Header, Sider, Content } = Layout;\n\nfunction App() {\n\tconst [currentPath, setCurrentPath] = useState('');\n\tconst [selectedKey, setSelectedKey] = useState('/');\n\tconst [refreshTable, setRefreshTable] = useState(moment().unix());\n\tconst [refreshTree, setRefreshTree] = useState(moment().unix());\n\n\tconst lang = useLang({ en, uk }, 'en');\n\tlet locale;\n\n\tmoment.locale(lang);\n\n\tswitch (lang) {\n\t\tcase 'uk':\n\t\t\tlocale = ukUA;\n\t\t\tbreak;\n\t\tcase 'en':\n\t\tdefault:\n\t\t\tlocale = enUS;\n\t}\n\n\tconst onDirectoryClick = key => {\n\t\tsetSelectedKey(key);\n\t\tconst path = key.replace(/^\\/+|\\/+$/g, '');\n\t\tsetCurrentPath(path);\n\t};\n\n\tconst refreshBoth = () => {\n\t\tsetRefreshTable(moment().unix());\n\t\tsetRefreshTree(moment().unix());\n\t}\n\n\tconst onUploadFinished = () => {\n\t\trefreshBoth();\n\t};\n\n\tconst onFolderCreated = () => {\n\t\trefreshBoth();\n\t};\n\n\tconst onTreeSelect = keys => {\n\t\tlet key = keys.shift();\n\t\tsetSelectedKey(key);\n\t\tkey = key.replace(/^\\/+|\\/+$/g, '');\n\t\tsetCurrentPath(key);\n\t};\n\n\treturn (\n\t\t<ConfigProvider locale={ locale }>\n\t\t\t<div className='app'>\n\t\t\t\t<Layout className='layout'>\n\t\t\t\t\t<Header className='header'>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col span={ 4 }>\n\t\t\t\t\t\t\t\t{ i18next.t('file_manager') }\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col span={ 14 }>\n\t\t\t\t\t\t\t\t<DirectoryBreadcrumb path={ currentPath } onClick={ onDirectoryClick } />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col className='pull-right' span={ 6 }>\n\t\t\t\t\t\t\t\t<UploadModal path={ currentPath } onUploadFinished={ onUploadFinished } />\n\t\t\t\t\t\t\t\t<NewFolderModal path={ currentPath } onFolderCreated={ onFolderCreated } />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Header>\n\t\t\t\t\t<Layout>\n\t\t\t\t\t\t<Sider className='sider'>\n\t\t\t\t\t\t\t<DirectoryTree onSelect={ onTreeSelect } selectedKeys={ [ selectedKey ] } refresh={ refreshTree } />\n\t\t\t\t\t\t</Sider>\n\t\t\t\t\t\t<Layout>\n\t\t\t\t\t\t\t<Content className='content'>\n\t\t\t\t\t\t\t\t<DirectoryTable path={ currentPath } refresh={ refreshTable } onRefreshBoth={ refreshBoth } onRefreshTree={ setRefreshTree } onClick={ onDirectoryClick } />\n\t\t\t\t\t\t\t</Content>\n\t\t\t\t\t\t</Layout>\n\t\t\t\t\t</Layout>\n\t\t\t\t</Layout>\n\t\t\t</div>\n\t\t</ConfigProvider>\n\t);\n}\n\nexport default App;\n","import i18next from 'i18next';\n// @todo: try to useMemo\n\nexport default function useLang(locales, defaultLang) {\n\n\tlet lang = window.location.pathname.slice(1, 3);\n\tif (locales[lang] === undefined) {\n\t\tlang = defaultLang;\n\t}\n\n\ti18next.init({\n\t\tlng: lang,\n\t\tresources: locales[lang]\n\t});\n\n\treturn lang;\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './app';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}