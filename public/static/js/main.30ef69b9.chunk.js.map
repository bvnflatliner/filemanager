{"version":3,"sources":["components/context-menu.jsx","components/footer-menu.jsx","api/api.js","hooks/use-deep-effect.js","hooks/use-request.js","components/destination-modal.jsx","components/directory-table.jsx","components/directory-tree.jsx","components/directory-breadcrumb.jsx","components/upload-modal.jsx","components/new-folder-modal.jsx","app.js","hooks/use-lang.js","index.js"],"names":["ContextMenu","record","visible","x","y","onCopyClick","menu","type","Item","key","onClick","Modal","info","icon","title","i18next","t","name","content","value","direct_link","readOnly","style","left","top","position","FooterMenu","onClickCopy","size","http","axios","create","baseURL","params","data","res","URLSearchParams","Object","keys","forEach","append","api","tree","get","dir","post","upload","path","args","FormData","file","filesParams","newfolder","copy","useDeepEffect","callback","deps","useEffect","ref","useRef","isEqual","current","useDeepCompareMemoize","reducer","oldState","newState","useRequest","request","payload","useReducer","loading","error","total","state","setState","then","response","responseData","status","length","msg","catch","message","DestinationModal","doCopy","hide","refresh","useState","destination","setDestination","dataSource","console","log","onOk","onCancel","treeData","onSelect","treeDefaultExpandAll","dropdownStyle","height","width","TextArea","Input","DirectoryTable","onRefresh","onFooterMenu","filterNameInput","createRef","filterSizeInput","filterPermissionsInput","filterOwnerInput","filterGroupInput","filterSizeOperation","setFilterSizeOperation","filterModifiedOperation","setFilterModifiedOperation","selectedRowKeys","setSelectedRowKeys","contextMenu","setContextMenu","destModalVisible","setDestModalVisible","oneFile","setOneFile","copyClick","fontSize","color","rowSelection","onChange","hideDefaultSelections","selections","text","filter","el","includes","columnWidth","columns","dataIndex","sorter","a","b","types","indexOf","filters","onFilter","filterMultiple","render","localeCompare","filterDropdown","setSelectedKeys","selectedKeys","confirm","clearFilters","padding","node","placeholder","e","target","onPressEnter","marginBottom","display","marginRight","toString","toLowerCase","onFilterDropdownVisibleChange","setTimeout","select","Group","min","focus","modified","showTime","unix","moment","format","permissions","owner","group","rowKey","scroll","onRow","classList","contains","media_type","autoSize","minRows","maxRows","src","alt","maxWidth","maxHeight","controls","kind","block","onContextMenu","preventDefault","document","addEventListener","onClickOutside","removeEventListener","clientX","clientY","files","successful","failedDirs","errors","dirs","map","failedFiles","notification","success","description","DirectoryTree","defaultExpandAll","DirectoryBreadcrumb","items","split","unshift","className","currentKey","item","idx","arg","renderBreadcrumbItems","UploadModal","onUploadFinished","modalVisible","setModalVisible","fileList","setFileList","uploading","setUploading","hideModal","uploadedFileList","uploaded","failedFileList","failed","okText","cancelText","beforeUpload","onRemove","index","newFileList","slice","splice","NewFolderModal","onFolderCreated","folder","setFolder","creating","setCreating","Header","Layout","Footer","Sider","Content","App","locale","currentPath","setCurrentPath","selectedKey","setSelectedKey","setRefresh","footerMenu","setFooterMenu","lang","locales","defaultLang","window","location","pathname","undefined","init","lng","resources","useLang","en","uk","ukUA","enUS","onDirectoryClick","replace","showFooterMenu","useCallback","span","shift","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.30ef69b9.chunk.js","sourcesContent":["import React from 'react';\nimport { Menu, Icon, Modal, Input } from 'antd';\n\nimport i18next from 'i18next';\n\nexport default function ContextMenu({ record, visible, x, y, onCopyClick }) {\n\tif (!visible) {\n\t\treturn <div />;\n\t}\n\n\tconst showLink = () => {\n\t\tModal.info({\n\t\t\ticon: null,\n\t\t\ttitle: i18next.t('direct_link_for_') + record.name,\n\t\t\tcontent: <Input\tvalue={ record.direct_link } readOnly />\n\t\t});\n\t};\n\n\tconst menu = (\n\t\t<Menu>\n\t\t\t{record.type === 'f' && <Menu.Item key='getLink' onClick={ showLink }><Icon type='link' />{i18next.t('get_direct_link')}</Menu.Item>}\n\t\t\t<Menu.Item key='copy' onClick={ () => onCopyClick(record) }><Icon type='copy' />{i18next.t('copy')}</Menu.Item>\n\t\t\t<Menu.Item key='3'>3rd menu item</Menu.Item>\n\t\t</Menu>\n\t);\n\n\treturn (\n\t\t<div style={{ left: `${ x }px`, top: `${ y }px`, position: 'absolute' }}>\n\t\t\t{ menu }\n\t\t</div>\n\t);\n}\n","import React from 'react';\nimport { Button, Icon } from 'antd';\n\nimport i18next from 'i18next';\n\nexport default function FooterMenu({ visible, onClickCopy }) {\n\tif (!visible) {\n\t\treturn <div />;\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<Button size='small' onClick={ onClickCopy } title={ i18next.t('copy') }><Icon type='copy' /></Button>\n\t\t</div>\n\t);\n}\n","import axios from 'axios';\n\nconst http = axios.create({\n\tbaseURL: '//filemanager.com'\n});\n\n// helper to prepare params for post request\nfunction params(data) {\n\tconst res = new URLSearchParams();\n\tObject.keys(data).forEach(key => {\n\t\tres.append(key, data[key]);\n\t});\n\n\treturn res;\n}\n\n// special helper to prepare files as FormData for post request\nfunction filesParams(data) {\n\tconst res = new FormData();\n\tdata.forEach(file => {\n\t\tres.append('files[]', file);\n\t});\n\n\treturn res;\n}\n\nconst api = {\n\n\ttree() {\n\t\treturn http.get('/api/tree');\n\t},\n\tdir(data) {\n\t\treturn http.post('/api/dir', params(data));\n\t},\n\tupload(data, path) {\n\t\tconst args = filesParams(data);\n\t\targs.append('path', path);\n\t\treturn http.post('/api/upload', args);\n\t},\n\tnewfolder(data) {\n\t\treturn http.get('/api/newfolder', { params: data });\n\t},\n\tfile(data) {\n\t\treturn http.get('/api/file', { params: data });\n\t},\n\tcopy(data) {\n\t\treturn http.post('/api/copy', params(data));\n\t}\n\n};\n\nexport { api as default };\n","import { useEffect, useRef } from 'react';\n\nimport { isEqual } from 'lodash';\n\nfunction useDeepCompareMemoize(value) {\n\tconst ref = useRef();\n\n\tif (!isEqual(value, ref.current)) {\n\t\tref.current = value;\n\t}\n\n\treturn ref.current;\n}\n\nexport default function useDeepEffect(callback, deps) {\n\tuseEffect(callback, useDeepCompareMemoize(deps));\n}\n","import { useReducer } from 'react';\n\nimport useDeepEffect from './use-deep-effect';\n\nconst reducer = (oldState, newState) => ({ ...oldState, ...newState });\n\nexport default function useRequest({ request, payload }) {\n\n\tconst initialState = {\n\t\tloading: true,\n\t\terror: null,\n\t\tdata: null,\n\t\ttotal: 0\n\t};\n\n\tconst [ state, setState ] = useReducer(reducer, initialState);\n\n\tuseDeepEffect(() => {\n\n\t\tsetState({ loading: true, error: null });\n\t\trequest(payload)\n\t\t\t.then(response => {\n\n\t\t\t\tconst responseData = response.data;\n\n\t\t\t\tif (responseData.status === 'ok') {\n\t\t\t\t\tconst { data } = responseData;\n\t\t\t\t\tconst total = responseData.total ? responseData.total : data.length;\n\n\t\t\t\t\t// @todo: if we add schema, parse data here\n\n\t\t\t\t\tsetState({ loading: false, data, total });\n\t\t\t\t} else {\n\t\t\t\t\tsetState({ loading: false, error: responseData.msg ? responseData.msg : 'Unknown error', data: null, total: 0 });\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tsetState({ loading: false, error: error.message, data: null, total: 0 });\n\t\t\t});\n\t}, [\n\t\trequest,\n\t\tpayload\n\t]);\n\n\treturn state;\n}\n","import React, { useState } from 'react';\nimport { Modal, TreeSelect } from 'antd';\n\nimport i18next from 'i18next';\n\nimport api from '../api/api';\nimport useRequest from '../hooks/use-request';\n\nexport default function DestinationModal({ visible, doCopy, hide, refresh }) {\n\tconst [ destination, setDestination ] = useState('');\n\n\tconst dataSource = useRequest({\n\t\trequest: api.tree,\n\t\tpayload: { refresh }\n\t});\n\n\tif (dataSource.loading) {\n\t\treturn null;\n\t}\n\n\tif (dataSource.error) {\n\t\tconsole.log(`Error: ${ dataSource.error }`);\n\t\treturn null;\n\t}\n\n\tconst onSelect = data => {\n\t\tsetDestination(data);\n\t};\n\n\tconst onCancel = () => {\n\t\tsetDestination('');\n\t\thide();\n\t};\n\n\tconst onOk = () => {\n\t\tdoCopy(destination);\n\t\tsetDestination('');\n\t\thide();\n\t};\n\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ i18next.t('copy_destination') }\n\t\t\tvisible={ visible }\n\t\t\tonOk={ onOk }\n\t\t\tonCancel={ onCancel }\n\t\t>\n\t\t\t<TreeSelect value={ destination } treeData={ [ dataSource.data ] } onSelect={ onSelect } treeDefaultExpandAll dropdownStyle={{ height: 300 }} style={{ width: 400 }} />\n\t\t</Modal>\n\t);\n}\n","import React, { useState, createRef, useEffect } from 'react';\nimport { Table, Input, Button, Radio, InputNumber, DatePicker, Spin, Icon, Modal, notification } from 'antd';\n\nimport i18next from 'i18next';\nimport moment from 'moment';\nimport ContextMenu from './context-menu';\nimport FooterMenu from './footer-menu';\nimport DestinationModal from './destination-modal';\n\nimport api from '../api/api';\nimport useRequest from '../hooks/use-request';\nimport './directory-table.css';\n\nconst { TextArea } = Input;\n\nexport default function DirectoryTable({ path, refresh, onRefresh, onClick, onFooterMenu }) {\n\tlet filterNameInput = createRef();\n\tlet filterSizeInput = createRef();\n\tlet filterPermissionsInput = createRef();\n\tlet filterOwnerInput = createRef();\n\tlet filterGroupInput = createRef();\n\tconst [ filterSizeOperation, setFilterSizeOperation ] = useState('gt');\n\tconst [ filterModifiedOperation, setFilterModifiedOperation ] = useState('gt');\n\tconst [ selectedRowKeys, setSelectedRowKeys ] = useState([]);\n\tconst [ contextMenu, setContextMenu ] = useState({\n\t\tvisible: false,\n\t\tx: 0,\n\t\ty: 0\n\t});\n\tconst [ destModalVisible, setDestModalVisible] = useState(false);\n\tconst [ oneFile, setOneFile ] = useState();\n\n\tconst dataSource = useRequest({\n\t\trequest: api.dir,\n\t\tpayload: { path, refresh }\n\t});\n\n\tconst copyClick = () => {\n\t\tsetDestModalVisible(true);\n\t};\n\n\tconst contextCopyClick = record => {\n\t\tsetOneFile(record.name);\n\t\tsetDestModalVisible(true);\n\t};\n\n\tuseEffect(() => {\n\t\tsetSelectedRowKeys([]);\n\t}, [path]);\n\n\tuseEffect(() => {\n\t\tonFooterMenu([<FooterMenu key='footer' visible={ selectedRowKeys.length > 0 } onClickCopy={ copyClick } />]);\n\t}, [onFooterMenu, selectedRowKeys]);\n\n\tif (dataSource.loading) {\n\t\treturn (\n\t\t\t<Spin size='large' style={{ position: 'relative', top: '45%', left: '50%' }} />\n\t\t);\n\t}\n\n\tif (dataSource.error) {\n\t\tconsole.log(`Error: ${ dataSource.error }`);\n\t\treturn (\n\t\t\t<Icon type='warning' style={{ fontSize: '1.6em', color: 'red', position: 'relative', top: 25, left: 25 }} />\n\t\t);\n\t}\n\n\tconst doCopy = destination => {\n\t\tconst files = oneFile ? [oneFile] : selectedRowKeys;\n\t\tapi.copy({ path, destination, files })\n\t\t\t.then(response => {\n\t\t\t\tconst responseData = response.data;\n\n\t\t\t\tif (responseData.status === 'ok') {\n\t\t\t\t\tconst { data } = responseData;\n\t\t\t\t\tconst { successful } = data;\n\t\t\t\t\tconst failedDirs = data.errors.dirs.map(el =>\n\t\t\t\t\t\t<li key={ el }>{ el }</li>\n\t\t\t\t\t);\n\t\t\t\t\tconst failedFiles = data.errors.files.map(el =>\n\t\t\t\t\t\t<li key={ el }>{ el }</li>\n\t\t\t\t\t);\n\t\t\t\t\tnotification.success({\n\t\t\t\t\t\tmessage: i18next.t('copied_successful'),\n\t\t\t\t\t\tdescription: (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<p>{ i18next.t('copied') + successful + i18next.t('_files') }</p>\n\t\t\t\t\t\t\t\t{ failedDirs.length > 0 && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<p>{ i18next.t('dirs_failed') }</p>\n\t\t\t\t\t\t\t\t\t\t<ul>{ failedDirs }</ul>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{ failedFiles.length > 0 && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<p>{ i18next.t('files_failed') }</p>\n\t\t\t\t\t\t\t\t\t\t<ul>{ failedFiles }</ul>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)\n\t\t\t\t\t});\n\t\t\t\t\tonRefresh(moment().unix());\n\t\t\t\t} else {\n\t\t\t\t\tconst msg = responseData.msg || i18next.t('unknown_error');\n\t\t\t\t\tnotification.error({\n\t\t\t\t\t\tmessage: i18next.t('copy_fail'),\n\t\t\t\t\t\tdescription: msg\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}).catch(error => {\n\t\t\t\tnotification.error({\n\t\t\t\t\tmessage: i18next.t('copy_fail'),\n\t\t\t\t\tdescription: error.message\n\t\t\t\t});\n\t\t\t});\n\n\t\tsetOneFile();\n\t\treturn true;\n\t};\n\n\tconst hideDestModal = () => {\n\t\tsetOneFile();\n\t\tsetDestModalVisible(false);\n\t};\n\n\tconst rowSelection = {\n\t\tselectedRowKeys,\n\t\tonChange: keys => {\n\t\t\tsetSelectedRowKeys(keys);\n\t\t},\n\t\thideDefaultSelections: true,\n\t\tselections: [\n\t\t\t{\n\t\t\t\tkey: 'all-data',\n\t\t\t\ttext: i18next.t('all_data'),\n\t\t\t\tonSelect: data => {\n\t\t\t\t\tsetSelectedRowKeys(data);\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'no-data',\n\t\t\t\ttext: i18next.t('no_data'),\n\t\t\t\tonSelect: () => {\n\t\t\t\t\tsetSelectedRowKeys([]);\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'invert-data',\n\t\t\t\ttext: i18next.t('invert_data'),\n\t\t\t\tonSelect: data => {\n\t\t\t\t\tsetSelectedRowKeys(data.filter(el => !selectedRowKeys.includes(el)));\n\t\t\t\t}\n\t\t\t}\n\t\t],\n\t\tcolumnWidth: 50\n\t};\n\n\tconst columns = [\n\t\t{\n\t\t\ttitle: i18next.t('type'),\n\t\t\tdataIndex: 'type',\n\t\t\tkey: 'type',\n\t\t\tsorter: (a, b) => {\n\t\t\t\tconst types = ['d', 'f'];\n\t\t\t\treturn types.indexOf(a.type) - types.indexOf(b.type);\n\t\t\t},\n\t\t\tfilters: [\n\t\t\t\t{ text: i18next.t('dir'), value: 'd' },\n\t\t\t\t{ text: i18next.t('file'), value: 'f' }\n\t\t\t],\n\t\t\tonFilter: (value, data) => data.type.indexOf(value) === 0,\n\t\t\tfilterMultiple: false,\n\t\t\trender: value => {\n\t\t\t\tlet res = '';\n\t\t\t\tswitch (value) {\n\t\t\t\t\tcase 'd':\n\t\t\t\t\t\tres = <Icon type='folder' />;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'f':\n\t\t\t\t\t\tres = <Icon type='file' />;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tres = <span>value</span>;\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t},\n\t\t\twidth: 90\n\t\t},\n\t\t{\n\t\t\ttitle: i18next.t('name'),\n\t\t\tdataIndex: 'name',\n\t\t\tkey: 'name',\n\t\t\tsorter: (a, b) => a.name.localeCompare(b.name),\n\t\t\tfilterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n\t\t\t\t<div style={{ padding: 8 }}>\n\t\t\t\t\t<Input ref={ node => { filterNameInput = node; } } placeholder={ i18next.t('filter_name') }\n\t\t\t\t\t\tvalue={ selectedKeys[0] }\n\t\t\t\t\t\tonChange={ e => setSelectedKeys(e.target.value ? [e.target.value] : []) }\n\t\t\t\t\t\tonPressEnter={ confirm }\n\t\t\t\t\t\tstyle={{ width: 188, marginBottom: 8, display: 'block' }}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='primary' onClick={ confirm }\n\t\t\t\t\t\ticon='filter' size='small' style={{ width: 90, marginRight: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ i18next.t('apply') }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ clearFilters } size='small' style={{ width: 90 }}>\n\t\t\t\t\t\t{ i18next.t('reset') }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tonFilter: (value, record) => record.name.toString().toLowerCase().includes(value.toLowerCase()),\n\t\t\tonFilterDropdownVisibleChange: visible => {\n\t\t\t\tif (visible) {\n\t\t\t\t\tsetTimeout(() => filterNameInput.select());\n\t\t\t\t}\n\t\t\t},\n\t\t\twidth: 230\n\t\t},\n\t\t{\n\t\t\ttitle: i18next.t('size'),\n\t\t\tdataIndex: 'size',\n\t\t\tkey: 'size',\n\t\t\tsorter: (a, b) => a.size - b.size,\n\t\t\tfilterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n\t\t\t\t<div style={{ padding: 8 }}>\n\t\t\t\t\t<Radio.Group value={ filterSizeOperation }\n\t\t\t\t\t\tonChange={ e => setFilterSizeOperation(e.target.value) }\n\t\t\t\t\t\tstyle={{ marginBottom: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Radio value='gt'>&gt;</Radio>\n\t\t\t\t\t\t<Radio value='lt'>&lt;</Radio>\n\t\t\t\t\t</Radio.Group>\n\t\t\t\t\t<InputNumber ref={ node => { filterSizeInput = node; } } placeholder={ i18next.t('filter_size') }\n\t\t\t\t\t\tvalue={ selectedKeys[0] } min={ 0 } onPressEnter={ confirm }\n\t\t\t\t\t\tonChange={ value => setSelectedKeys(value ? [ value ] : []) }\n\t\t\t\t\t\tstyle={{ width: 188, marginBottom: 8, display: 'block' }}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='primary' onClick={ confirm }\n\t\t\t\t\t\ticon='filter' size='small' style={{ width: 90, marginRight: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ i18next.t('apply') }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ clearFilters } size='small' style={{ width: 90 }}>\n\t\t\t\t\t\t{ i18next.t('reset') }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tonFilter: (value, record) => filterSizeOperation === 'lt' ? record.size < value : record.size > value,\n\t\t\tonFilterDropdownVisibleChange: visible => {\n\t\t\t\tif (visible) {\n\t\t\t\t\tsetTimeout(() => filterSizeInput.focus());\n\t\t\t\t}\n\t\t\t},\n\t\t\twidth: 120\n\t\t},\n\t\t{\n\t\t\ttitle: i18next.t('modified'),\n\t\t\tdataIndex: 'modified',\n\t\t\tkey: 'modified',\n\t\t\tsorter: (a, b) => a.modified - b.modified,\n\t\t\tfilterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n\t\t\t\t<div style={{ padding: 8 }}>\n\t\t\t\t\t<Radio.Group value={ filterModifiedOperation }\n\t\t\t\t\t\tonChange={ e => setFilterModifiedOperation(e.target.value) }\n\t\t\t\t\t\tstyle={{ marginBottom: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Radio value='gt'>&gt;</Radio>\n\t\t\t\t\t\t<Radio value='lt'>&lt;</Radio>\n\t\t\t\t\t</Radio.Group>\n\t\t\t\t\t<DatePicker showTime placeholder={ i18next.t('filter_modified') } value={ selectedKeys[0] }\n\t\t\t\t\t\tonPressEnter={ confirm } onChange={ value => setSelectedKeys(value ? [ value ] : []) }\n\t\t\t\t\t\tstyle={{ width: 188, marginBottom: 8, display: 'block' }}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='primary' onClick={ confirm }\n\t\t\t\t\t\ticon='filter' size='small' style={{ width: 90, marginRight: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ i18next.t('apply') }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ clearFilters } size='small' style={{ width: 90 }}>\n\t\t\t\t\t\t{ i18next.t('reset') }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tonFilter: (value, record) => filterModifiedOperation === 'lt' ? record.modified < value.unix() : record.modified > value.unix(),\n\t\t\trender: value => moment.unix(value).format('LLL'),\n\t\t\twidth: 240\n\t\t},\n\t\t{\n\t\t\ttitle: i18next.t('permissions'),\n\t\t\tdataIndex: 'permissions',\n\t\t\tkey: 'permissions',\n\t\t\tsorter: (a, b) => a.permissions.localeCompare(b.permissions),\n\t\t\tfilterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n\t\t\t\t<div style={{ padding: 8 }}>\n\t\t\t\t\t<Input ref={ node => { filterPermissionsInput = node; } } placeholder={ i18next.t('filter_permissions') }\n\t\t\t\t\t\tvalue={ selectedKeys[0] }\n\t\t\t\t\t\tonChange={ e => setSelectedKeys(e.target.value ? [e.target.value] : []) }\n\t\t\t\t\t\tonPressEnter={ confirm }\n\t\t\t\t\t\tstyle={{ width: 188, marginBottom: 8, display: 'block' }}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='primary' onClick={ confirm }\n\t\t\t\t\t\ticon='filter' size='small' style={{ width: 90, marginRight: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ i18next.t('apply') }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ clearFilters } size='small' style={{ width: 90 }}>\n\t\t\t\t\t\t{ i18next.t('reset') }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tonFilter: (value, record) => record.permissions.toString().toLowerCase().includes(value.toLowerCase()),\n\t\t\tonFilterDropdownVisibleChange: visible => {\n\t\t\t\tif (visible) {\n\t\t\t\t\tsetTimeout(() => filterPermissionsInput.select());\n\t\t\t\t}\n\t\t\t},\n\t\t\twidth: 140\n\t\t},\n\t\t{\n\t\t\ttitle: i18next.t('owner'),\n\t\t\tdataIndex: 'owner',\n\t\t\tkey: 'owner',\n\t\t\tsorter: (a, b) => a.owner.localeCompare(b.owner),\n\t\t\tfilterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n\t\t\t\t<div style={{ padding: 8 }}>\n\t\t\t\t\t<Input ref={ node => { filterOwnerInput = node; } } placeholder={ i18next.t('filter_owner') }\n\t\t\t\t\t\tvalue={ selectedKeys[0] }\n\t\t\t\t\t\tonChange={ e => setSelectedKeys(e.target.value ? [e.target.value] : []) }\n\t\t\t\t\t\tonPressEnter={ confirm }\n\t\t\t\t\t\tstyle={{ width: 188, marginBottom: 8, display: 'block' }}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='primary' onClick={ confirm }\n\t\t\t\t\t\ticon='filter' size='small' style={{ width: 90, marginRight: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ i18next.t('apply') }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ clearFilters } size='small' style={{ width: 90 }}>\n\t\t\t\t\t\t{ i18next.t('reset') }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tonFilter: (value, record) => record.owner.toString().toLowerCase().includes(value.toLowerCase()),\n\t\t\tonFilterDropdownVisibleChange: visible => {\n\t\t\t\tif (visible) {\n\t\t\t\t\tsetTimeout(() => filterOwnerInput.select());\n\t\t\t\t}\n\t\t\t},\n\t\t\twidth: 140\n\t\t},\n\t\t{\n\t\t\ttitle: i18next.t('group'),\n\t\t\tdataIndex: 'group',\n\t\t\tkey: 'group',\n\t\t\tsorter: (a, b) => a.group.localeCompare(b.group),\n\t\t\tfilterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n\t\t\t\t<div style={{ padding: 8 }}>\n\t\t\t\t\t<Input ref={ node => { filterGroupInput = node; } } placeholder={ i18next.t('filter_group') }\n\t\t\t\t\t\tvalue={ selectedKeys[0] }\n\t\t\t\t\t\tonChange={ e => setSelectedKeys(e.target.value ? [e.target.value] : []) }\n\t\t\t\t\t\tonPressEnter={ confirm }\n\t\t\t\t\t\tstyle={{ width: 188, marginBottom: 8, display: 'block' }}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button type='primary' onClick={ confirm }\n\t\t\t\t\t\ticon='filter' size='small' style={{ width: 90, marginRight: 8 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ i18next.t('apply') }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={ clearFilters } size='small' style={{ width: 90 }}>\n\t\t\t\t\t\t{ i18next.t('reset') }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tonFilter: (value, record) => record.group.toString().toLowerCase().includes(value.toLowerCase()),\n\t\t\tonFilterDropdownVisibleChange: visible => {\n\t\t\t\tif (visible) {\n\t\t\t\t\tsetTimeout(() => filterGroupInput.select());\n\t\t\t\t}\n\t\t\t},\n\t\t\twidth: 140\n\t\t}\n\t];\n\n\tconst onRow = record => ({\n\t\tonClick: e => {\n\t\t\tif (e.target.classList.contains('ant-checkbox-input')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (record.type === 'd') {\n\t\t\t\tonClick(`${ path ? `/${ path }` : '' }/${ record.name }/`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet content;\n\t\t\tswitch (record.media_type) {\n\t\t\t\tcase 'text':\n\t\t\t\t\tapi.file({ path, name: record.name })\n\t\t\t\t\t\t.then(response => {\n\t\t\t\t\t\t\tconst responseData = response.data;\n\t\t\t\t\t\t\tif (responseData.status === 'ok') {\n\t\t\t\t\t\t\t\tconst { data } = responseData;\n\t\t\t\t\t\t\t\tcontent = <TextArea autoSize={{ minRows: 4, maxRows: 16 }} value={ data.content } />;\n\t\t\t\t\t\t\t\tModal.info({\n\t\t\t\t\t\t\t\t\ticon: null,\n\t\t\t\t\t\t\t\t\twidth: '80%',\n\t\t\t\t\t\t\t\t\ttitle: i18next.t('view_') + record.name,\n\t\t\t\t\t\t\t\t\tcontent\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'image':\n\t\t\t\t\tcontent = (<div><img src={ record.direct_link } alt={ record.name } style={{ maxWidth: '100%', maxHeight: '100%' }} /></div>);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'audio':\n\t\t\t\t\tcontent = (<audio controls><source src={ record.direct_link } /><track kind='captions' /></audio>);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'video':\n\t\t\t\t\tcontent = (<video style={{ maxWidth: '100%', maxHeight: '100%' }} controls><source src={ record.direct_link } /><track kind='captions' /></video>);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'binary':\n\t\t\t\t\tcontent = (<Button type='dashed' block>{ i18next.t('binary_file') }</Button>);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tcontent = (<Button type='dashed' block>{ i18next.t('unknown_file_format') }</Button>);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (content) {\n\t\t\t\tModal.info({\n\t\t\t\t\ticon: null,\n\t\t\t\t\twidth: '80%',\n\t\t\t\t\ttitle: i18next.t('view_') + record.name,\n\t\t\t\t\tcontent\n\t\t\t\t});\n\t\t\t}\n\n\t\t},\n\t\tonContextMenu: e => {\n\t\t\te.preventDefault();\n\t\t\tif (!contextMenu.visible) {\n\t\t\t\tdocument.addEventListener(`click`, function onClickOutside() {\n\t\t\t\t\tsetContextMenu({ visible: false, x: 0, y: 0 });\n\t\t\t\t\tdocument.removeEventListener(`click`, onClickOutside);\n\t\t\t\t});\n\t\t\t}\n\t\t\tsetContextMenu({\n\t\t\t\trecord,\n\t\t\t\tvisible: true,\n\t\t\t\tx: e.clientX,\n\t\t\t\ty: e.clientY\n\t\t\t});\n\t\t}\n\t});\n\n\tconst { record, visible, x, y } = contextMenu;\n\n\treturn (\n\t\t<>\n\t\t\t<Table dataSource={ dataSource.data } columns={ columns } rowKey='name'\n\t\t\t\tscroll={{ y: 'calc(100vh - 240px)', x: true }} size='middle'\n\t\t\t\trowSelection={ rowSelection } onRow={ onRow }\n\t\t\t/>\n\t\t\t<ContextMenu record={ record } visible={ visible } x={ x } y={ y } onCopyClick={ contextCopyClick } />\n\t\t\t<DestinationModal visible={ destModalVisible } doCopy={ doCopy } hide={ hideDestModal } refresh={ refresh } />\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { Tree, Spin, Icon } from 'antd';\n\nimport api from '../api/api';\nimport useRequest from '../hooks/use-request';\n\nexport default function DirectoryTree({ onSelect, selectedKeys, refresh }) {\n\n\tconst dataSource = useRequest({\n\t\trequest: api.tree,\n\t\tpayload: { refresh }\n\t});\n\n\tif (dataSource.loading) {\n\t\treturn (\n\t\t\t<Spin style={{ position: 'relative', top: '40%', left: '45%' }} />\n\t\t);\n\t}\n\n\tif (dataSource.error) {\n\t\tconsole.log(`Error: ${ dataSource.error }`);\n\t\treturn (\n\t\t\t<Icon type='warning' style={{ fontSize: '1.4em', color: 'red', position: 'relative', top: 15, left: 15 }} />\n\t\t);\n\t}\n\n\treturn <Tree treeData={ [ dataSource.data ] } onSelect={ onSelect } selectedKeys={ selectedKeys } defaultExpandAll />;\n}\n","import React from 'react';\nimport { Breadcrumb, Icon } from 'antd';\n\nexport default function DirectoryBreadcrumb({ path, onClick }) {\n\tconst items = path.split('/');\n\titems.unshift('');\n\n\tconst renderBreadcrumbItems = data => {\n\t\tlet currentKey = '';\n\t\treturn data.map((item, idx) => {\n\t\t\tcurrentKey += `${ item }/`;\n\t\t\tconst arg = currentKey;\n\t\t\tif (idx === 0) {\n\t\t\t\treturn (\n\t\t\t\t\t<Breadcrumb.Item key={ currentKey } onClick={ () => onClick(arg) }><Icon type='home' /></Breadcrumb.Item>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<Breadcrumb.Item key={ currentKey } onClick={ () => onClick(arg) }>{ item }</Breadcrumb.Item>\n\t\t\t);\n\t\t});\n\t};\n\n\treturn (\n\t\t<Breadcrumb className='breadcrumb'>{ renderBreadcrumbItems(items) }</Breadcrumb>\n\t);\n}\n","import React, { useState } from 'react';\nimport { Button, Modal, Upload, Icon, notification } from 'antd';\n\nimport i18next from 'i18next';\n\nimport api from '../api/api';\n\nexport default function UploadModal({ path, onUploadFinished }) {\n\tconst [modalVisible, setModalVisible] = useState(false);\n\tconst [fileList, setFileList] = useState([]);\n\tconst [uploading, setUploading] = useState(false);\n\n\tconst showModal = () => {\n\t\tsetModalVisible(true);\n\t};\n\n\tconst hideModal = () => {\n\t\tsetModalVisible(false);\n\t};\n\n\tconst okModal = () => {\n\t\tif (fileList.length === 0) {\n\t\t\treturn false;\n\t\t}\n\t\tsetUploading(true);\n\n\t\tapi.upload(fileList, path)\n\t\t\t.then(response => {\n\t\t\t\tconst responseData = response.data;\n\n\t\t\t\tif (responseData.status === 'ok') {\n\t\t\t\t\tconst { data } = responseData;\n\t\t\t\t\tconst uploadedFileList = data.uploaded.map(el =>\n\t\t\t\t\t\t<li key={ el.name }>{ el.name }</li>\n\t\t\t\t\t);\n\t\t\t\t\tif (uploadedFileList.length !== 0) {\n\t\t\t\t\t\tnotification.success({\n\t\t\t\t\t\t\tmessage: i18next.t('files_upload_success'),\n\t\t\t\t\t\t\tdescription: <ul>{ uploadedFileList }</ul>\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tconst failedFileList = data.failed.map(el =>\n\t\t\t\t\t\t<li key={ el.name }>{ `${ el.name }: ${ el.errors[0].message }` }</li>\n\t\t\t\t\t);\n\t\t\t\t\tif (failedFileList.length !== 0) {\n\t\t\t\t\t\tnotification.error({\n\t\t\t\t\t\t\tmessage: i18next.t('files_upload_fail'),\n\t\t\t\t\t\t\tdescription: <ul>{ failedFileList }</ul>\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t// reload dir\n\t\t\t\t\tonUploadFinished();\n\t\t\t\t\tsetFileList([]);\n\t\t\t\t\thideModal();\n\t\t\t\t} else {\n\t\t\t\t\tconst msg = responseData.msg || i18next.t('unknown_error');\n\t\t\t\t\tnotification.error({\n\t\t\t\t\t\tmessage: i18next.t('files_upload_fail'),\n\t\t\t\t\t\tdescription: msg\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tsetUploading(false);\n\t\t\t}).catch(error => {\n\t\t\t\tnotification.error({\n\t\t\t\t\tmessage: i18next.t('files_upload_fail'),\n\t\t\t\t\tdescription: error.message\n\t\t\t\t});\n\t\t\t\tsetUploading(false);\n\t\t\t});\n\n\t\treturn true;\n\t};\n\n\tconst cancelModal = () => {\n\t\tsetFileList([]);\n\t\thideModal();\n\t};\n\n\tconst beforeUpload = file => {\n\t\tsetFileList([ ...fileList, file ]);\n\t\treturn false;\n\t};\n\n\tconst removeFile = file => {\n\t\tconst index = fileList.indexOf(file);\n\t\tconst newFileList = fileList.slice();\n\t\tnewFileList.splice(index, 1);\n\t\tsetFileList(newFileList);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<Button type='primary' icon='upload' onClick={ showModal }>\n\t\t\t\t{ i18next.t('upload') }\n\t\t\t</Button>\n\t\t\t<Modal title={ i18next.t('upload_files') } visible={ modalVisible } onOk={ okModal }\n\t\t\t\tonCancel={ cancelModal } okText={ uploading ? (<Icon type='loading' />) : i18next.t('ok') } cancelText={ i18next.t('cancel') }>\n\t\t\t\t<Upload fileList={ fileList } beforeUpload={ beforeUpload } onRemove={ removeFile }>\n\t\t\t\t\t<Button>\n\t\t\t\t\t\t<Icon type='upload' />Upload\n\t\t\t\t\t</Button>\n\t\t\t\t</Upload>\n\t\t\t</Modal>\n\t\t</>\n\t);\n}\n","import React, { useState } from 'react';\nimport { Button, Modal, Icon, Input, notification } from 'antd';\n\nimport i18next from 'i18next';\n\nimport api from '../api/api';\n\nexport default function NewFolderModal({ path, onFolderCreated }) {\n\tconst [modalVisible, setModalVisible] = useState(false);\n\tconst [folder, setFolder] = useState('');\n\tconst [creating, setCreating] = useState(false);\n\n\tconst showModal = () => {\n\t\tsetModalVisible(true);\n\t};\n\n\tconst hideModal = () => {\n\t\tsetModalVisible(false);\n\t};\n\n\tconst okModal = () => {\n\t\tif (folder === '') {\n\t\t\treturn false;\n\t\t}\n\t\tsetCreating(true);\n\n\t\tapi.newfolder({ path, folder })\n\t\t\t.then(response => {\n\t\t\t\tconst responseData = response.data;\n\n\t\t\t\tif (responseData.status === 'ok') {\n\t\t\t\t\tconst { data } = responseData;\n\t\t\t\t\tnotification.success({\n\t\t\t\t\t\tmessage: i18next.t('new_folder_success'),\n\t\t\t\t\t\tdescription: <p>{ data.folder }</p>\n\t\t\t\t\t});\n\t\t\t\t\t// reload tree\n\t\t\t\t\tonFolderCreated();\n\t\t\t\t\tsetFolder('');\n\t\t\t\t\thideModal();\n\t\t\t\t} else {\n\t\t\t\t\tconst msg = responseData.msg || i18next.t('unknown_error');\n\t\t\t\t\tnotification.error({\n\t\t\t\t\t\tmessage: i18next.t('new_folder_fail'),\n\t\t\t\t\t\tdescription: msg\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tsetCreating(false);\n\t\t\t}).catch(error => {\n\t\t\t\tnotification.error({\n\t\t\t\t\tmessage: i18next.t('new_folder_fail'),\n\t\t\t\t\tdescription: error.message\n\t\t\t\t});\n\t\t\t\tsetCreating(false);\n\t\t\t});\n\n\t\treturn true;\n\t};\n\n\tconst cancelModal = () => {\n\t\tsetFolder('');\n\t\thideModal();\n\t};\n\n\tconst onChangeName = e => {\n\t\tsetFolder(e.target.value);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<Button type='primary' icon='folder-add' onClick={ showModal }>\n\t\t\t\t{ i18next.t('new_folder') }\n\t\t\t</Button>\n\t\t\t<Modal title={ i18next.t('new_folder') } visible={ modalVisible } onOk={ okModal }\n\t\t\t\tonCancel={ cancelModal } okText={ creating ? (<Icon type='loading' />) : i18next.t('ok') } cancelText={ i18next.t('cancel') }>\n\t\t\t\t<Input placeholder='Folder name' value={ folder } onChange={ onChangeName } />\n\t\t\t</Modal>\n\t\t</>\n\t);\n}\n","import React, { useState, useCallback } from 'react';\n\nimport { ConfigProvider, Layout, Row, Col } from 'antd';\nimport enUS from 'antd/es/locale/en_US';\nimport ukUA from 'antd/es/locale/uk_UA';\nimport 'antd/dist/antd.css';\n\nimport 'moment/locale/uk';\n\nimport i18next from 'i18next';\nimport moment from 'moment';\nimport en from './locale/en.json';\nimport uk from './locale/uk.json';\n\nimport useLang from './hooks/use-lang';\n\nimport DirectoryTable from './components/directory-table';\nimport DirectoryTree from './components/directory-tree';\nimport DirectoryBreadcrumb from './components/directory-breadcrumb';\nimport UploadModal from './components/upload-modal';\nimport NewFolderModal from './components/new-folder-modal';\nimport './app.css';\n\nconst { Header, Footer, Sider, Content } = Layout;\n\nfunction App() {\n\tconst [currentPath, setCurrentPath] = useState('');\n\tconst [selectedKey, setSelectedKey] = useState('/');\n\tconst [refresh, setRefresh] = useState(moment().unix());\n\tconst [footerMenu, setFooterMenu] = useState([]);\n\n\tconst lang = useLang({ en, uk }, 'en');\n\tlet locale;\n\n\tmoment.locale(lang);\n\n\tswitch (lang) {\n\t\tcase 'uk':\n\t\t\tlocale = ukUA;\n\t\t\tbreak;\n\t\tcase 'en':\n\t\tdefault:\n\t\t\tlocale = enUS;\n\t}\n\n\tconst onDirectoryClick = key => {\n\t\tsetSelectedKey(key);\n\t\tconst path = key.replace(/^\\/+|\\/+$/g, '');\n\t\tsetCurrentPath(path);\n\t};\n\n\tconst onUploadFinished = () => {\n\t\tsetRefresh(moment().unix());\n\t};\n\n\tconst onFolderCreated = () => {\n\t\tsetRefresh(moment().unix());\n\t};\n\n\tconst onTreeSelect = keys => {\n\t\tlet key = keys.shift();\n\t\tsetSelectedKey(key);\n\t\tkey = key.replace(/^\\/+|\\/+$/g, '');\n\t\tsetCurrentPath(key);\n\t};\n\n\tconst showFooterMenu = useCallback(\n\t\tmenu => {\n\t\t\tsetFooterMenu(menu);\n\t\t},\n\t\t[]\n\t);\n\n\treturn (\n\t\t<ConfigProvider locale={ locale }>\n\t\t\t<div className='app'>\n\t\t\t\t<Layout className='layout'>\n\t\t\t\t\t<Header className='header'>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col span={ 4 }>\n\t\t\t\t\t\t\t\t{ i18next.t('file_manager') }\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col span={ 14 }>\n\t\t\t\t\t\t\t\t<DirectoryBreadcrumb path={ currentPath } onClick={ onDirectoryClick } />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col className='pull-right' span={ 3 }>\n\t\t\t\t\t\t\t\t<UploadModal path={ currentPath } onUploadFinished={ onUploadFinished } />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col className='pull-right' span={ 3 }>\n\t\t\t\t\t\t\t\t<NewFolderModal path={ currentPath } onFolderCreated={ onFolderCreated } />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Header>\n\t\t\t\t\t<Layout>\n\t\t\t\t\t\t<Sider className='sider'>\n\t\t\t\t\t\t\t<DirectoryTree onSelect={ onTreeSelect } selectedKeys={ [ selectedKey ] } refresh={ refresh } />\n\t\t\t\t\t\t</Sider>\n\t\t\t\t\t\t<Layout>\n\t\t\t\t\t\t\t<Content className='content'>\n\t\t\t\t\t\t\t\t<DirectoryTable path={ currentPath } refresh={ refresh } onRefresh={ setRefresh } onClick={ onDirectoryClick } onFooterMenu={ showFooterMenu } />\n\t\t\t\t\t\t\t</Content>\n\t\t\t\t\t\t\t<Footer className='footer'>{footerMenu}</Footer>\n\t\t\t\t\t\t</Layout>\n\t\t\t\t\t</Layout>\n\t\t\t\t</Layout>\n\t\t\t</div>\n\t\t</ConfigProvider>\n\t);\n}\n\nexport default App;\n","import i18next from 'i18next';\n// @todo: try to useMemo\n\nexport default function useLang(locales, defaultLang) {\n\n\tlet lang = window.location.pathname.slice(1, 3);\n\tif (locales[lang] === undefined) {\n\t\tlang = defaultLang;\n\t}\n\n\ti18next.init({\n\t\tlng: lang,\n\t\tresources: locales[lang]\n\t});\n\n\treturn lang;\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './app';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}